<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Huan Shuo Hsu, Jinyi Liu">

<title>The Effectiveness of Digital Advertisement in Driving Customer Retention: A Quantitative Analysis of Digital Efficacy</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="statistical_research_readme_files/libs/clipboard/clipboard.min.js"></script>
<script src="statistical_research_readme_files/libs/quarto-html/quarto.js"></script>
<script src="statistical_research_readme_files/libs/quarto-html/popper.min.js"></script>
<script src="statistical_research_readme_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="statistical_research_readme_files/libs/quarto-html/anchor.min.js"></script>
<link href="statistical_research_readme_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="statistical_research_readme_files/libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="statistical_research_readme_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="statistical_research_readme_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="statistical_research_readme_files/libs/bootstrap/bootstrap-973236bd072d72a04ee9cd82dcc9cb29.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#research-proposal" id="toc-research-proposal" class="nav-link active" data-scroll-target="#research-proposal"><strong>Research Proposal</strong></a>
  <ul>
  <li><a href="#memo-to-decision-makers" id="toc-memo-to-decision-makers" class="nav-link" data-scroll-target="#memo-to-decision-makers">Memo to Decision Makers</a>
  <ul class="collapse">
  <li><a href="#purpose-objective" id="toc-purpose-objective" class="nav-link" data-scroll-target="#purpose-objective">Purpose / Objective</a></li>
  <li><a href="#background-and-problem" id="toc-background-and-problem" class="nav-link" data-scroll-target="#background-and-problem">Background and Problem</a></li>
  <li><a href="#call-to-action" id="toc-call-to-action" class="nav-link" data-scroll-target="#call-to-action">Call to Action</a></li>
  </ul></li>
  <li><a href="#statement-of-the-problem" id="toc-statement-of-the-problem" class="nav-link" data-scroll-target="#statement-of-the-problem">Statement of the Problem</a></li>
  <li><a href="#literature-review" id="toc-literature-review" class="nav-link" data-scroll-target="#literature-review">Literature Review</a></li>
  <li><a href="#research-questions-hypotheses-and-effects" id="toc-research-questions-hypotheses-and-effects" class="nav-link" data-scroll-target="#research-questions-hypotheses-and-effects">Research Questions, Hypotheses, and Effects</a>
  <ul class="collapse">
  <li><a href="#research-question-1" id="toc-research-question-1" class="nav-link" data-scroll-target="#research-question-1">Research Question 1</a></li>
  <li><a href="#research-question-2" id="toc-research-question-2" class="nav-link" data-scroll-target="#research-question-2">Research Question 2</a></li>
  <li><a href="#research-question-3" id="toc-research-question-3" class="nav-link" data-scroll-target="#research-question-3">Research Question 3</a></li>
  </ul></li>
  <li><a href="#importance-of-the-study-and-social-impact" id="toc-importance-of-the-study-and-social-impact" class="nav-link" data-scroll-target="#importance-of-the-study-and-social-impact">Importance of the Study and Social Impact</a></li>
  <li><a href="#research-plan" id="toc-research-plan" class="nav-link" data-scroll-target="#research-plan">Research Plan</a>
  <ul class="collapse">
  <li><a href="#population-of-interest" id="toc-population-of-interest" class="nav-link" data-scroll-target="#population-of-interest">Population of Interest</a></li>
  <li><a href="#sample-selection" id="toc-sample-selection" class="nav-link" data-scroll-target="#sample-selection">Sample Selection</a></li>
  <li><a href="#operational-procedures" id="toc-operational-procedures" class="nav-link" data-scroll-target="#operational-procedures">Operational Procedures</a></li>
  <li><a href="#brief-schedule" id="toc-brief-schedule" class="nav-link" data-scroll-target="#brief-schedule">Brief Schedule</a></li>
  <li><a href="#data-collection" id="toc-data-collection" class="nav-link" data-scroll-target="#data-collection">Data Collection</a></li>
  <li><a href="#data-security" id="toc-data-security" class="nav-link" data-scroll-target="#data-security">Data Security</a></li>
  <li><a href="#variables" id="toc-variables" class="nav-link" data-scroll-target="#variables">Variables</a></li>
  </ul></li>
  <li><a href="#statistical-analysis-plan" id="toc-statistical-analysis-plan" class="nav-link" data-scroll-target="#statistical-analysis-plan">Statistical Analysis Plan</a>
  <ul class="collapse">
  <li><a href="#t-test" id="toc-t-test" class="nav-link" data-scroll-target="#t-test">T-Test</a></li>
  <li><a href="#proportion-test" id="toc-proportion-test" class="nav-link" data-scroll-target="#proportion-test">Proportion Test</a></li>
  <li><a href="#chi-squared-test-of-independence" id="toc-chi-squared-test-of-independence" class="nav-link" data-scroll-target="#chi-squared-test-of-independence">Chi Squared Test of Independence</a></li>
  </ul></li>
  <li><a href="#sample-size-and-statistical-power" id="toc-sample-size-and-statistical-power" class="nav-link" data-scroll-target="#sample-size-and-statistical-power">Sample Size and Statistical Power</a>
  <ul class="collapse">
  <li><a href="#research-question-1-ad-frequency" id="toc-research-question-1-ad-frequency" class="nav-link" data-scroll-target="#research-question-1-ad-frequency">Research Question 1: Ad Frequency</a></li>
  <li><a href="#research-question-2-ad-type" id="toc-research-question-2-ad-type" class="nav-link" data-scroll-target="#research-question-2-ad-type">Research Question 2: Ad Type</a></li>
  <li><a href="#research-question-3-ad-length" id="toc-research-question-3-ad-length" class="nav-link" data-scroll-target="#research-question-3-ad-length">Research Question 3: Ad Length</a></li>
  </ul></li>
  <li><a href="#possible-recommendations" id="toc-possible-recommendations" class="nav-link" data-scroll-target="#possible-recommendations">Possible Recommendations</a>
  <ul class="collapse">
  <li><a href="#research-question-1-ad-frequency-1" id="toc-research-question-1-ad-frequency-1" class="nav-link" data-scroll-target="#research-question-1-ad-frequency-1">Research Question 1: Ad Frequency</a></li>
  <li><a href="#research-question-2-ad-type-1" id="toc-research-question-2-ad-type-1" class="nav-link" data-scroll-target="#research-question-2-ad-type-1">Research Question 2: Ad Type</a></li>
  <li><a href="#research-question-3-ad-length-1" id="toc-research-question-3-ad-length-1" class="nav-link" data-scroll-target="#research-question-3-ad-length-1">Research Question 3: Ad Length</a></li>
  </ul></li>
  <li><a href="#limitations-and-uncertainties" id="toc-limitations-and-uncertainties" class="nav-link" data-scroll-target="#limitations-and-uncertainties">Limitations and Uncertainties</a></li>
  </ul></li>
  <li><a href="#simulation-of-effects" id="toc-simulation-of-effects" class="nav-link" data-scroll-target="#simulation-of-effects"><strong>Simulation of Effects</strong></a>
  <ul>
  <li><a href="#q1-no-effect-t-test" id="toc-q1-no-effect-t-test" class="nav-link" data-scroll-target="#q1-no-effect-t-test">Q1: No Effect (T-test)</a>
  <ul class="collapse">
  <li><a href="#result-reflection" id="toc-result-reflection" class="nav-link" data-scroll-target="#result-reflection">Result Reflection</a></li>
  </ul></li>
  <li><a href="#q1-effect-t-test" id="toc-q1-effect-t-test" class="nav-link" data-scroll-target="#q1-effect-t-test">Q1 Effect (T-test)</a>
  <ul class="collapse">
  <li><a href="#result-reflection-1" id="toc-result-reflection-1" class="nav-link" data-scroll-target="#result-reflection-1">Result Reflection</a></li>
  </ul></li>
  <li><a href="#q2-no-effect-proportion-test" id="toc-q2-no-effect-proportion-test" class="nav-link" data-scroll-target="#q2-no-effect-proportion-test">Q2 No effect (Proportion Test)</a>
  <ul class="collapse">
  <li><a href="#result-reflection-2" id="toc-result-reflection-2" class="nav-link" data-scroll-target="#result-reflection-2">Result Reflection</a></li>
  </ul></li>
  <li><a href="#q2-effect" id="toc-q2-effect" class="nav-link" data-scroll-target="#q2-effect">Q2 Effect</a>
  <ul class="collapse">
  <li><a href="#result-reflection-3" id="toc-result-reflection-3" class="nav-link" data-scroll-target="#result-reflection-3">Result Reflection</a></li>
  </ul></li>
  <li><a href="#q3-no-effect-chi-squared-test-of-independence" id="toc-q3-no-effect-chi-squared-test-of-independence" class="nav-link" data-scroll-target="#q3-no-effect-chi-squared-test-of-independence">Q3 No effect (Chi Squared Test of Independence)</a>
  <ul class="collapse">
  <li><a href="#result-reflection-4" id="toc-result-reflection-4" class="nav-link" data-scroll-target="#result-reflection-4">Result Reflection</a></li>
  </ul></li>
  <li><a href="#q3-effect-chi-squared-test-of-independence" id="toc-q3-effect-chi-squared-test-of-independence" class="nav-link" data-scroll-target="#q3-effect-chi-squared-test-of-independence">Q3 Effect (Chi Squared Test of Independence)</a>
  <ul class="collapse">
  <li><a href="#result-reflection-5" id="toc-result-reflection-5" class="nav-link" data-scroll-target="#result-reflection-5">Result Reflection</a></li>
  </ul></li>
  <li><a href="#table" id="toc-table" class="nav-link" data-scroll-target="#table">Table</a>
  <ul class="collapse">
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references"><strong>References</strong></a></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">The Effectiveness of Digital Advertisement in Driving Customer Retention: A Quantitative Analysis of Digital Efficacy</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Huan Shuo Hsu, Jinyi Liu </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="research-proposal" class="level1">
<h1><strong>Research Proposal</strong></h1>
<section id="memo-to-decision-makers" class="level2">
<h2 class="anchored" data-anchor-id="memo-to-decision-makers">Memo to Decision Makers</h2>
<section id="purpose-objective" class="level4">
<h4 class="anchored" data-anchor-id="purpose-objective">Purpose / Objective</h4>
<p>This document presents a plan to improve Coca-Cola’s advertising strategy for an experimented flavor (New Flavor A) using targeted YouTube campaigns. The main goal is to boost Amazon sales, increase customer subscriptions, and encourage more frequent purchases by understanding how different ad strategies—such as frequency, type, and length—impact consumer behavior.</p>
</section>
<section id="background-and-problem" class="level4">
<h4 class="anchored" data-anchor-id="background-and-problem">Background and Problem</h4>
<p>Coca-Cola has always been at the forefront of innovation, but today’s digital marketplace is more competitive than ever. YouTube ads hold great potential for connecting with consumers, yet it’s not entirely clear how specific factors like how often ads are shown, the type of ads used, or their length influence customer decisions. Without this clarity, there’s a risk of overspending on strategies that don’t deliver results. Research shows that refining these elements could lead to noticeable improvements in sales and loyalty, but to do this effectively, Coca-Cola needs evidence-based insights. The research will use data collected over three months through automated systems that track ad performance, sales, and customer behavior. Using proven statistical methods, the study will identify which strategies work best and provide actionable recommendations.</p>
</section>
<section id="call-to-action" class="level4">
<h4 class="anchored" data-anchor-id="call-to-action">Call to Action</h4>
<p>This is an opportunity for Coca-Cola to uncover the most effective ways to reach and engage its audience. By supporting this study, Coca-Cola can make smarter decisions about where to invest its advertising budget and ensure that every dollar spent generates maximum return. We recommend moving forward by finalizing the collaboration, providing access to performance data, and allocating a small budget for data tracking and analysis. Together, we can unlock new insights to strengthen Coca-Cola’s digital marketing strategy and deliver lasting results in a fast-moving market.</p>
</section>
</section>
<section id="statement-of-the-problem" class="level2">
<h2 class="anchored" data-anchor-id="statement-of-the-problem">Statement of the Problem</h2>
<p>Coca-Cola, a global leader in the beverage industry, is facing increasing competition as consumer preferences shift toward water, seltzer, and other flavored drinks (BrandVM). Coca-Cola’s annual revenue for 2022 was <code>$43.004</code> billion, a <code>11.25%</code> increase from 2021, and in 2023, the company’s revenue was <code>$45.754</code> billion, an <code>6.39%</code> increase from 2022 (DemandSage). These figures demonstrate Coca-Cola’s ability to grow its overall business despite changing consumer preferences. The company continues to innovate and adapt its product portfolio, offering a staggering <code>3,500</code> varieties across more than <code>200</code> countries (BrandVM). To add, this adaptability is especially critical in the increasingly competitive digital marketplace, where organizations must continuously optimize their marketing strategies to effectively engage customers and foster long-term loyalty. For a global brand like Coca-Cola, navigating digital platforms effectively is both an opportunity and a challenge. YouTube, with over two billion monthly logged-in users (Macrotrends), provides a unique avenue for increasing brand awareness, promoting products, and fostering customer loyalty. Recognizing this, Coca-Cola aims to leverage YouTube advertising to boost online sales and engagement for its new products. However, uncertainties persist regarding the effects of ad frequency, format, and length on customer behavior. Without addressing these uncertainties, Coca-Cola may fail to fully capitalize on the potential of YouTube advertising, missing out on opportunities to attract consumers’ attention to its innovative products.</p>
<p>The aim of this project is to answer the research questions that were designed to support the research problem.</p>
<ul>
<li><p>How would increasing the frequency of YouTube ads (from 1 ad per week to 3 ads per week) impact the online sales on Amazon of New Flavour A Coca Cola over the period of three months?</p></li>
<li><p>Does the type of YouTube ads (skippable ads, non-skippable ads) have a significant impact on the proportion of automatic subscriptions of New Flavor A Coca Cola on Amazon within three months?</p></li>
<li><p>Is there a significant association between the length (10s and 30s) of the Youtube Ads and the weekly online purchase frequency per customer on Amazon within three months?</p></li>
</ul>
</section>
<section id="literature-review" class="level2">
<h2 class="anchored" data-anchor-id="literature-review">Literature Review</h2>
<p>Jordan Valinsky (2024) reported that Coca-Cola faces increasing competition as consumers shift towards water, seltzers, and bold-flavored drinks from smaller brands like Olipop and Poppi. To address this, the company has introduced a new flavor to align with changing consumer tastes driven by demographic shifts and the growing popularity of flavored sodas, which have outpaced traditional cola sales. However, Coca-Cola’s modest 1% sales growth in North America in 2022 underscores the challenge of staying competitive in a dynamic beverage market.</p>
<p>Nowadays, consumers of all ages and demographics are spending a significant amount of their time on the Internet. Due to these trends, businesses have expanded their marketing campaigns to reach consumers through digital platforms. According to Nielsen (2012), an effective advertising campaign attracts a large audience. In 2014, <code>88%</code> of businesses invested in social media advertising, which accounted for 5% of their advertising budgets. By 2018, this share was projected to double. Pikas and Sorrentino (2014) explored the efficacy of online advertisements on social media platforms such as Facebook, Twitter and YouTube.</p>
<p>According to Soukup (2014), YouTube has become a crucial platform for business. Scholars and experts highlight its potential for video marketing, effective advertising and brand management. Chadha (2018) noted that nearly <code>80%</code> of marketers recognized YouTube as an essential platform for marketing through online digital videos. As a result, YouTube Marketing Communication has become a key promotional strategy, accounting for a significant <code>25%</code> share of promotional money. Jarboe (2009) and Miles (2013) emphasized strategies such as campaign planning, video creation and leverage YouTube’s social networking aspects for marketing success. Moon, Jung, and Lee (2011) explored the impact of video quality and format on ad effectiveness. Pashkevich, Dorai-Raj, Kellar, and Zigmond (2012) studied in-stream advertising and skippable ads and further emphasized YouTube’s versatility as a marketing tool. Li and Lo (2014) examined the effects of ad length, location and context congruity. According to the study, ad duration has an impact on brand identification with long ads being more remembered. Firat’s (2019) study examined the factors influencing YouTube advertising value and its impact on consumer purchase intentions. The research identified that attributes such as informativeness, entertainment, and trendiness significantly enhance advertising value. Additionally, the study established a positive correlation between YouTube ads and consumers’ purchase intentions.</p>
<p>To evaluate the effectiveness and advantages of YouTube ads, it is essential to understand how advertising works on the platform. Based on Bauer (2013), YouTube introduced ads in 2006, providing businesses an opportunity to connect with a border audience. The launch featured Participatory Ads and Brand Channels, with more development followed in subsequent years. The platform now offers a wide range of standard ad formats for use in its video streaming services (Google Ads Help)</p>
<ul>
<li><p>Skippable Ads: These are a common ad format on YouTube. These ads are presented before the selected video will stream and can range from <code>10</code> seconds to <code>6</code> minutes in length, with viewers having the option to skip the ad after <code>5</code> seconds. They may also include a call to action button which is displayed either throughout the ad or after a specified duration. Since viewers can skip this type of ad, the primary goal is to capture and retain their interest. Skippable ads allow advertisers to gather a wide range of data including metrics like completed views, partial views, channel subscriptions and call to action completions.</p></li>
<li><p>Non-skippable Ads: This form of ads are non-skippable and can be presented before, during or after the selected video. These ads typically last <code>10</code> to <code>30</code> seconds and are only available for videos longer than <code>10</code> minutes. Like skippable ads, non-skippable ads also provide advertisers with valuable performance data.</p></li>
<li><p>Bumper Ads: These are YouTube’s shortest ad format, lasting up to <code>6</code> seconds and appearing at the beginning of a video. Similar to non-skippable ads, they cannot be skipped.</p></li>
<li><p>Overlay Ads: Also known as banner ads, are displayed within the selected video, hovering at the bottom of the screen. They can appear and disappear at any point during the video.</p></li>
</ul>
<p>Subscription e-commerce is a rapidly growing model that offers consumers convenient, personalized, and cost-effective ways to purchase recurring products or services. Amazon’s Subscribe &amp; Save, one of the most popular replenishment subscription services, exemplifies this trend by automating the purchase of essential goods like consumer packaged items at discounted prices with additional perks for subscribers. This approach not only simplifies shopping but also fosters customer loyalty, with <code>45%</code> of replenishment subscribers maintaining their membership for over a year. However, subscription businesses face challenges like high churn rates, requiring a focus on delivering superior customer experiences to retain users and ensure sustainable growth. (Chen, Fenyo, Yang, and Zhang, 2018)</p>
<p>Amazon’s Subscribe &amp; Save offers a flexible and cost-effective way to purchase products like Coca Cola. Customers can choose a one-time purchase or opt for the subscription function to save <code>5%</code> on each order. This method allows customers to customize their delivery schedule, with intervals ranging from <code>2</code> weeks to <code>6</code> months, ensuring consistent supply while avoiding the hassle of reordering. This mechanism not only provides convenience but also encourages customer loyalty through savings and tailored delivery options.</p>
</section>
<section id="research-questions-hypotheses-and-effects" class="level2">
<h2 class="anchored" data-anchor-id="research-questions-hypotheses-and-effects">Research Questions, Hypotheses, and Effects</h2>
<p>To assess the impact of YouTube advertising on the online performance of New Flavor A Coca-Cola, the experiment will test three key advertising strategies: ad frequency, ad type, and ad length. Targeted YouTube campaigns will be implemented to examine their influence on Amazon sales and subscription metrics over three months. The primary outcomes include changes in Amazon sales revenue, the proportion of automatic subscriptions, and weekly purchase frequency per customer, all measured through specific performance metrics.</p>
<section id="research-question-1" class="level3">
<h3 class="anchored" data-anchor-id="research-question-1">Research Question 1</h3>
<p>How would increasing the frequency of YouTube ads (from <code>1</code> ad per week to <code>3</code> ads per week) impact the online sales on Amazon of New Flavour A Coca Cola (12 Pack) over the period of three months?</p>
<ul>
<li><strong>Null Hypothesis (H₀)</strong>: Increasing ad frequency does not significantly increase the sales within three months.</li>
<li><strong>Alternative Hypothesis (H₁</strong>): Increasing ad frequency does significantly increase the sales within three months.</li>
<li><strong>Effect size</strong>: A <code>10%</code> increase in sales within three months would represent a meaningful improvement.</li>
<li><strong>Outcome and Metric</strong>: Track total online sales on Amazon of New Flavor A Coca Cola, measured in revenue over three months.</li>
</ul>
</section>
<section id="research-question-2" class="level3">
<h3 class="anchored" data-anchor-id="research-question-2">Research Question 2</h3>
<p>Does the type of YouTube ads (skippable ads, non-skippable ads) have a significant impact on the proportion of automatic subscriptions of New Flavor A Coca Cola (12 Pack) on Amazon within three months?</p>
<ul>
<li><strong>Null Hypothesis (H₀)</strong>: The type of YouTube ads does not have a significant impact on the proportion of automatic subscriptions for New Flavor A Coca Cola on Amazon within three months.</li>
<li><strong>Alternative Hypothesis (H₁</strong>):The type of YouTube ads has a significant impact on the proportion of automatic subscriptions for New Flavor A Coca Cola on Amazon within three months.</li>
<li><strong>Effect size</strong>:A <code>5%</code> increase in automatic subscriptions would be a meaningful improvement for Coca-Cola.</li>
<li><strong>Outcome and Metric</strong>: Monitor the proportion of subscriptions on Amazon attributed to skippable and non-skippable YouTube ads over three months.</li>
</ul>
</section>
<section id="research-question-3" class="level3">
<h3 class="anchored" data-anchor-id="research-question-3">Research Question 3</h3>
<p>Is there a significant association between the length (<code>10s</code> and <code>30s</code>) of the Youtube Ads and the weekly online purchase frequency of New Flavor A Coca Cola (12 Pack) per customer on Amazon within three months?</p>
<ul>
<li><strong>Null Hypothesis (H₀)</strong>:There is no significant association between the length of Youtube Ads and the weekly online purchase frequency per customer on Amazon within three months.</li>
<li><strong>Alternative Hypothesis (H₁</strong>): There is a significant association between the length of Youtube ads and the weekly online purchase frequency per customer on Amazon within three months.</li>
<li><strong>Effect size</strong>: A <code>2</code> bottle increase in purchase frequency per customer within three months would represent a meaningful<code>10%</code> improvement.</li>
<li><strong>Outcome and Metric</strong>: Record the average weekly purchase frequency per customer.</li>
</ul>
</section>
</section>
<section id="importance-of-the-study-and-social-impact" class="level2">
<h2 class="anchored" data-anchor-id="importance-of-the-study-and-social-impact">Importance of the Study and Social Impact</h2>
<p>The study is essential for Coca Cola as it explores the dynamic digital marketing environment to effectively promote its new product, New Flavor A Coca Cola. Coca-Cola can maximize its marketing expenditures and deepen consumer brand loyalty by determining the most efficient ad forms, frequencies, and budget allocations. This ensures efficient allocation of advertising budgets while reducing unnecessary spending. Understanding how specific YouTube ads characteristics influence consumer behavior will enable Coca Cola to design campaigns that boost both sales and long-term customer loyalty. As Coca Cola faces competition from sparkling water, seltzers and other beverage categories, innovative marketing techniques are important to retain existing customers and attract new ones in the competitive digital marketplace. Beyond commercial objectives, this study has wider societal ramifications. With companies like Coca-Cola continuing to make significant investments in digital marketing, knowing how to properly engage customers can have an impact on their media consumption habits and behavior. In addition to promoting brand loyalty, effective marketing techniques will result in sustained long term customer satisfaction. Moreover, Coca Cola’s success in innovating healthier or more appealing products could influence broader trends toward mode consumer-conscious offerings in the beverage industry.</p>
</section>
<section id="research-plan" class="level2">
<h2 class="anchored" data-anchor-id="research-plan">Research Plan</h2>
<section id="population-of-interest" class="level4">
<h4 class="anchored" data-anchor-id="population-of-interest">Population of Interest</h4>
<p>The recruitment process for the study will begin with collecting qualified candidates from Amazon analytics tools across various platforms, including email lists, social media, and targeted advertisements. The recruitment process will not rely on a traditional survey but instead use YouTube’s ad targeting tools to ensure participants meet the inclusion criteria naturally. Using online activity data and purchase behavior from Amazon, the study can focus on consumers who organically interacted with the ads. This approach eliminates the need for direct survey distribution, reducing recruitment bias. The population of interest will consist of consumers aged <code>18</code> to <code>65</code> who have shopped online after watching YouTube ads relevant to New Flavor A Coca-Cola during the 3-month study period. For the inclusion group, customers with exposure to YouTube ads during the study, having watched at least one relevant ad, made at least one online purchase on Amazon during the study duration, and agreed to participate in the study. For the exclusion group, customers who shopped more than three times a week, or residing outside the geographic area where the YouTube ads are implemented, use ad-blocking software that may prevent them from viewing YouTube ads, have unreliable internet access, which could prevent consistent exposure to YouTube ads, are affiliated with Coca-Cola or its advertising partners, to prevent biases, or have participated in similar studies or experiments involving Coca-Cola or comparable products in the past year.</p>
</section>
<section id="sample-selection" class="level4">
<h4 class="anchored" data-anchor-id="sample-selection">Sample Selection</h4>
<p>Participants will be randomly assigned into groups. Group assignment will be independent of participants’ demographic characteristics or previous engagement behavior. Grouping will be automated based on ad engagement data collected by YouTube’s analytics platform. Participants will remain unaware of their assigned groups to prevent bias and ensure natural behavior during the study. Participants will be assigned into groups based on the variables of interest:</p>
<ul>
<li><strong>Ad Frequency groups</strong>: <code>700</code> Participants will be divided into two groups. A control group consisting of <code>350</code> individuals exposed to 1 ad per week and an experimental group consisting of <code>530</code> individuals exposed to 3 ads per week. (Accounting for dropouts)</li>
<li><strong>Ad Type groups</strong>: <code>1300</code> Participants will be divided into two groups. A control group consisting of <code>650</code> individuals exposed primarily to skippable ads and an experimental group consisting of <code>650</code> individuals exposed to non-skippable ads. (Accounting for dropouts)</li>
<li><strong>Ad Length groups</strong>: <code>1100</code> Participants will be divided into two groups. A control group consisting of <code>550</code> individuals exposed to 10-second ads and an experimental group consisting of <code>550</code> individuals exposed to 30-second ads. (Accounting for dropouts)</li>
</ul>
</section>
<section id="operational-procedures" class="level4">
<h4 class="anchored" data-anchor-id="operational-procedures">Operational Procedures</h4>
<p>The recruitment process will be conducted through digital platforms such as YouTube and Amazon. Participants will be identified based on their interaction with ads for Coca-Cola’s New Flavor A that only sells on Amazon during the study period, as tracked by YouTube analytics tools. Eligible participants will be invited to participate via online messages including a general overview of the study and an informed consent form. No surveys will be used for recruitment. The study will be conducted online using YouTube’s ad delivery and analytics tools. Once eligibility is confirmed, participants will be randomly assigned to one of two groups, anonymized, and encrypted to avoid selection bias. Participants will be exposed to these ads during their regular online activities. YouTube’s system will ensure that participants are exposed to their designated ad types and engagement data will be automatically collected. Online purchase behavior and subscription data will be tracked through Amazon’s analytics tools. Study personnel will receive training on securely handling data and interpreting data from YouTube and Amazon analytics tools. They will also be trained on ethical considerations, including participant confidentiality and compliance with data protection regulations. Study personnel will inform the participants of instructions during the study period with minimal interaction to avoid influencing behavior, limiting communication to providing initial instructions on how the researcher will track their purchases, periodic reminder of the instruction twice a month, and a follow-up instruction once the research has ended. On top of that, participants will have the freedom to withdraw at any point without penalties, and their data will be excluded from the study if they choose to leave. Those who complete the study will receive financial compensation or gift cards proportional to the time and effort required. Finally, the study will follow a structured timeline, beginning with a pre-study survey (from Sample Selection) to collect baseline demographic and behavioral data, followed by the three-month study period with records tracking participants’ purchase behaviours, and concluding with a final post-study survey to measure purchase outcomes, subscriptions, and ad recall.</p>
</section>
<section id="brief-schedule" class="level4">
<h4 class="anchored" data-anchor-id="brief-schedule">Brief Schedule</h4>
<table class="caption-top table">
<caption>Total Duration: 28 Weeks (Approximately 7 Months)</caption>
<colgroup>
<col style="width: 40%">
<col style="width: 27%">
<col style="width: 31%">
</colgroup>
<thead>
<tr class="header">
<th>Phase</th>
<th style="text-align: left;">Week(s)</th>
<th style="text-align: left;">Activities</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Planning and Preparation</td>
<td style="text-align: left;">1-4</td>
<td style="text-align: left;">Finalize research design, develop recruitment materials, train researchers, set up platforms, and pilot testing.</td>
</tr>
<tr class="even">
<td>Recruitment and Assignment</td>
<td style="text-align: left;">5-7</td>
<td style="text-align: left;">Screen participants, obtain consent, and assign participants to groups.</td>
</tr>
<tr class="odd">
<td>Study Implementation</td>
<td style="text-align: left;">8-20</td>
<td style="text-align: left;">Expose participants to ads, track behaviors, and send bi-monthly reminders.</td>
</tr>
<tr class="even">
<td>Post-Study Data Collection and Analysis</td>
<td style="text-align: left;">21-24</td>
<td style="text-align: left;">Analyze data and evaluate hypotheses.</td>
</tr>
<tr class="odd">
<td>Reporting and Dissemination</td>
<td style="text-align: left;">25-28</td>
<td style="text-align: left;">Prepare reports, present findings to stakeholders, and submit for publication or conference presentations.</td>
</tr>
</tbody>
</table>
</section>
<section id="data-collection" class="level4">
<h4 class="anchored" data-anchor-id="data-collection">Data Collection</h4>
<p>Data will be collected using an automated system integrated with YouTube’s analytics tools and Amazon’s sales tracking system: One week before the trial to gauge baseline purchasing habits and subsequent data will be collected over the three-month experimental period. Participants will be exposed to different advertising conditions (frequency, type and length of ad). Meanwhile, Amazon sales data will be collected to measure key outcomes such as total revenue, subscription rates, and weekly purchase frequency. All data will be securely stored, and participants’ identities will remain anonymous to ensure anonymity.</p>
</section>
<section id="data-security" class="level4">
<h4 class="anchored" data-anchor-id="data-security">Data Security</h4>
<p>To ensure data security, all information collected will be anonymized and stored on a secure, password-protected system accessible only to authorized researchers. Data will be encrypted during storage and analysis, and researchers will be trained in ethical data handling practices. Any systems used for data collection or storage will comply with standard privacy regulations, and participants will be informed of these measures during the consent process.</p>
</section>
<section id="variables" class="level4">
<h4 class="anchored" data-anchor-id="variables">Variables</h4>
<section id="outcomes-dependent-variables" class="level5">
<h5 class="anchored" data-anchor-id="outcomes-dependent-variables">Outcomes (Dependent Variables)</h5>
<ul>
<li><strong>Ad Frequency Effectiveness</strong>:
<ul>
<li>Outcome: Total online sales of New Flavor A Coca-Cola on Amazon over the three-month period.</li>
<li>Metric: Measured in revenue, tracking whether increased ad frequency leads to higher sales.</li>
</ul></li>
<li><strong>Ad Type Effectiveness</strong>:
<ul>
<li>Outcome: Proportion of automatic subscriptions for New Flavor A Coca-Cola on Amazon attributed to skippable and non-skippable ads.</li>
<li>Metric: Measured as a percentage of total subscriptions over the three-month period.</li>
</ul></li>
<li><strong>Ad Length Effectiveness</strong>:
<ul>
<li>Outcome: Average weekly purchase frequency per customer for New Flavor A Coca-Cola on Amazon.</li>
<li>Metric: Measured as the number of purchases per customer per week over the three-month period.</li>
</ul></li>
</ul>
</section>
<section id="treatments-independent-variables" class="level5">
<h5 class="anchored" data-anchor-id="treatments-independent-variables">Treatments (Independent Variables):</h5>
<ul>
<li><strong>Ad Frequency</strong>: The number of YouTube ads broadcast per week, with two levels:
<ul>
<li>1 ad per week (control group)</li>
<li>3 ads per week (experimental group)</li>
</ul></li>
<li><strong>Ad Type</strong>: The type of YouTube ad, with two levels:
<ul>
<li>Skippable ads (control group)</li>
<li>Non-skippable ads (experimental group)</li>
</ul></li>
<li><strong>Ad Length</strong>: The duration of YouTube ads, with two levels:
<ul>
<li>10-second ads (control group)</li>
<li>30-second ads (experimental group)</li>
</ul></li>
</ul>
</section>
<section id="other-variables" class="level5">
<h5 class="anchored" data-anchor-id="other-variables">Other Variables:</h5>
<ul>
<li><strong>Customer Demographics</strong>: Age, gender, geographic location, and income level may affect how consumers respond to different ad strategies.</li>
<li><strong>Device Type</strong>: Whether consumers view ads on mobile devices, tablets, or desktop computers may influence engagement and purchasing behavior.</li>
<li><strong>Purchase Intent</strong>: Customers with varying levels of pre-existing interest in - Coca-Cola products may respond differently to ads.</li>
<li><strong>Time of Day</strong>: The time ads are broadcast (e.g., during peak hours vs.&nbsp;off-peak hours) could affect their visibility and impact.</li>
</ul>
</section>
</section>
</section>
<section id="statistical-analysis-plan" class="level2">
<h2 class="anchored" data-anchor-id="statistical-analysis-plan">Statistical Analysis Plan</h2>
<p>This study will employ a quantitative analysis approach to evaluate the impact of YouTube advertising strategies on the online performance of New Flavor A Coca-Cola that only sells on Amazon for experiment. A significance level of <code>0.05</code> will be applied to assess statistical significance, forming the basis for rejecting or failing to reject the null hypotheses. The analysis will utilize a range of statistical tests designed to align with the nature of the data and the research questions.</p>
<section id="t-test" class="level4">
<h4 class="anchored" data-anchor-id="t-test">T-Test</h4>
<p>To examine whether increasing the frequency of YouTube ads (from <code>1</code> ad per week to <code>3</code> ads per week) significantly affects Amazon sales revenue, an independent sample t-test will be conducted. This test is well-suited for comparing the means of two independent groups (<code>1</code> ad/week vs.&nbsp;<code>3</code> ads/week) to determine if the observed differences in sales revenue are statistically significant.</p>
</section>
<section id="proportion-test" class="level4">
<h4 class="anchored" data-anchor-id="proportion-test">Proportion Test</h4>
<p>To analyze the impact of ad type (skippable vs.&nbsp;non-skippable ads) on the proportion of automatic subscriptions for New Flavor A Coca-Cola, a two-proportion z-test will be performed. This test is appropriate for comparing the subscription rates associated with each ad type, providing insights into their relative effectiveness.</p>
</section>
<section id="chi-squared-test-of-independence" class="level4">
<h4 class="anchored" data-anchor-id="chi-squared-test-of-independence">Chi Squared Test of Independence</h4>
<p>To evaluate the relationship between ad length (<code>10</code> seconds vs.&nbsp;<code>30</code> seconds) and weekly online purchase frequency per customer, a chi-squared test of independence will be conducted. This test is ideal for assessing associations between two categorical variables, enabling an evaluation of whether ad length significantly influences purchase frequency.</p>
</section>
</section>
<section id="sample-size-and-statistical-power" class="level2">
<h2 class="anchored" data-anchor-id="sample-size-and-statistical-power">Sample Size and Statistical Power</h2>
<p>To ensure the study provides Coca-Cola with reliable and meaningful results, we calculated the sample sizes needed for each research question based on the goal of achieving an <code>80%</code> chance of detecting a true effect with a significance level of <code>0.05</code>.</p>
<section id="research-question-1-ad-frequency" class="level4">
<h4 class="anchored" data-anchor-id="research-question-1-ad-frequency">Research Question 1: Ad Frequency</h4>
<p>For the Ad Frequency experiment, a two-sample t-test was used to calculate the required sample size to detect a medium effect size (<code>d = 0.5</code>, corresponding to a <code>10%</code> increase in sales). The calculation was conducted with the following parameters:</p>
<ul>
<li><strong>Significance Level</strong>: <code>0.05</code>, meaning there is a <code>5%</code> chance of incorrectly rejecting the null hypothesis.</li>
<li><strong>Statistical Power</strong>: <code>0.8</code>, indicating there is an <code>80%</code> chance of correctly rejecting the null hypothesis when the alternative hypothesis is true.</li>
<li><strong>Cohen’s d</strong>: <code>0.2</code>, corresponding to a <code>10%</code> increase in sales.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pwr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>sample.size.calculation <span class="ot">=</span> <span class="fu">pwr.t.test</span>(<span class="at">d =</span> <span class="fl">0.2</span>, <span class="at">sig.level =</span> <span class="fl">0.05</span>,<span class="at">power =</span> <span class="fl">0.8</span>, <span class="at">alternative =</span> <span class="st">"greater"</span>); sample.size.calculation</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
     Two-sample t test power calculation 

              n = 309.8065
              d = 0.2
      sig.level = 0.05
          power = 0.8
    alternative = greater

NOTE: n is number in *each* group</code></pre>
</div>
</div>
<p>The results of the calculation indicate that each group requires at least <code>310</code> participants, resulting in a total sample size of <code>n = 620</code>. This sample size ensures sufficient power to detect a medium effect size under given conditions. If the observed effect size is smaller than <code>d = 0.2</code> or if a higher statistical power is desired, a larger sample size would be necessary.</p>
</section>
<section id="research-question-2-ad-type" class="level4">
<h4 class="anchored" data-anchor-id="research-question-2-ad-type">Research Question 2: Ad Type</h4>
<p>For the Ad Type experiment, a proportion test was used to calculate the required sample size to detect a medium effect size (corresponding to a <code>5%</code> increase in subscription rate). The calculation was conducted with the following parameters:</p>
<ul>
<li><strong>Significance Level</strong>: <code>0.05</code>, meaning there is a <code>5%</code> chance of incorrectly rejecting the null hypothesis.</li>
<li><strong>Statistical Power</strong>: <code>0.8</code>, indicating there is an <code>80%</code> chance of correctly rejecting the null hypothesis when the alternative hypothesis is true.</li>
<li><strong>Effect Size</strong>: <code>p1 = 0.4</code>, <code>p2 = 0.35</code>, corresponding to a approximately <code>5%</code> increase in subscription rate.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>sample.size.p <span class="ot">=</span> <span class="fu">pwr.2p.test</span>(<span class="at">h =</span> <span class="fu">ES.h</span>(<span class="at">p1 =</span> <span class="fl">0.4</span>, <span class="at">p2 =</span> <span class="fl">0.35</span>), <span class="at">sig.level =</span> <span class="fl">0.05</span>, <span class="at">power =</span> <span class="fl">0.8</span>, <span class="at">alternative =</span> <span class="st">"greater"</span>); sample.size.p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
     Difference of proportion power calculation for binomial distribution (arcsine transformation) 

              h = 0.1033347
              n = 1157.992
      sig.level = 0.05
          power = 0.8
    alternative = greater

NOTE: same sample sizes</code></pre>
</div>
</div>
<p>The results of the calculation indicate that each group requires at least <code>579</code> participants, resulting in a total sample size of <code>n = 1158</code>. This sample size ensures sufficient power to detect a medium effect size under given conditions. If the observed effect size is smaller or if a higher statistical power is desired, a larger sample size would be necessary.</p>
</section>
<section id="research-question-3-ad-length" class="level4">
<h4 class="anchored" data-anchor-id="research-question-3-ad-length">Research Question 3: Ad Length</h4>
<p>For the Ad Length experiment, a chi-squared test was used to calculate the required sample size to detect a medium effect size (corresponding to a <code>10%</code> increase in online purchase frequency). The calculation was conducted with the following parameters:</p>
<ul>
<li><strong>Significance Level</strong>: <code>0.05</code>, meaning there is a <code>5%</code> chance of incorrectly rejecting the null hypothesis.</li>
<li><strong>Statistical Power</strong>: <code>0.8</code>, indicating there is an <code>80%</code> chance of correctly rejecting the null hypothesis when the alternative hypothesis is true.</li>
<li><strong>Effect Size</strong>: <code>p1 = 0.6</code>, <code>p2 = 0.5</code>, corresponding to a <code>10%</code> increase in online purchase frequency.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>sample.size.p <span class="ot">&lt;-</span> <span class="fu">pwr.chisq.test</span>(<span class="at">w =</span> <span class="fl">0.1</span>, <span class="at">df =</span> <span class="dv">2</span>, <span class="at">sig.level =</span> <span class="fl">0.05</span>, <span class="at">power =</span> <span class="fl">0.8</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(sample.size.p)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
     Chi squared power calculation 

              w = 0.1
              N = 963.4689
             df = 2
      sig.level = 0.05
          power = 0.8

NOTE: N is the number of observations</code></pre>
</div>
</div>
<p>The results of the calculation indicate that each group requires at least <code>482</code> participants, resulting in a total sample size of <code>n = 964</code>. This sample size ensures sufficient power to detect a medium effect size under given conditions. If the observed effect size is smaller or if a higher statistical power is desired, a larger sample size would be necessary.</p>
<p>With Coca Cola being a large-scale global company, we can rely on its abundant connection and resources to recruit an adequate number of participants. For ad frequency and ad length, where small behavioral shifts can translate into significant revenue over time, larger samples are necessary to uncover patterns with confidence. For ad type, where the expected differences are more pronounced, a smaller yet precise sample is sufficient.</p>
</section>
</section>
<section id="possible-recommendations" class="level2">
<h2 class="anchored" data-anchor-id="possible-recommendations">Possible Recommendations</h2>
<section id="research-question-1-ad-frequency-1" class="level4">
<h4 class="anchored" data-anchor-id="research-question-1-ad-frequency-1">Research Question 1: Ad Frequency</h4>
<ul>
<li><p><strong>If the null hypothesis is not rejected</strong> (increasing ad frequency has no significant impact): If it turns out that increasing the frequency of ads doesn’t make a difference, it would be wise to stick with the current strategy of running <code>1</code> ad per week. This approach would help avoid wasting money on ineffective changes. Instead, focus could shift to exploring other factors, like improving ad targeting to reach the right audience or enhancing the content to make the ads more engaging and memorable.</p></li>
<li><p><strong>If the null hypothesis is rejected</strong> (increasing ad frequency has a significant impact): If the data shows that running <code>3</code> ads per week leads to better sales, then it would make sense to increase the frequency. This could mean reallocating the budget from less effective marketing channels to ensure the added ads have the necessary resources. A consistent, higher-frequency strategy could potentially drive more significant results.</p></li>
</ul>
</section>
<section id="research-question-2-ad-type-1" class="level4">
<h4 class="anchored" data-anchor-id="research-question-2-ad-type-1">Research Question 2: Ad Type</h4>
<ul>
<li><p><strong>If the null hypothesis is not rejected</strong> (ad type has no significant impact): If there’s no clear advantage between skippable and non-skippable ads, choosing the more affordable skippable ads could be the best option. This would free up resources to invest in other areas, like expanding the reach of the campaign or testing new marketing platforms to connect with a broader audience.</p></li>
<li><p><strong>If the null hypothesis is rejected</strong> (ad type has a significant impact): If one ad type proves to be more effective—say non-skippable ads lead to more subscriptions—it would be logical to focus on producing more of that kind. Crafting compelling, attention-grabbing non-skippable ads would ensure maximum engagement and better results in terms of customer loyalty and subscriptions.</p></li>
</ul>
</section>
<section id="research-question-3-ad-length-1" class="level4">
<h4 class="anchored" data-anchor-id="research-question-3-ad-length-1">Research Question 3: Ad Length</h4>
<ul>
<li><p><strong>If the null hypothesis is not rejected</strong> (ad length has no significant impact): If ad length doesn’t seem to matter, shorter <code>10</code>-second ads could be the way to go. They’re likely cheaper to produce and less disruptive for viewers, which can be a win-win. The saved resources could then be funneled into increasing the number of ads shown or making the ad content more creative and impactful.</p></li>
<li><p><strong>If the null hypothesis is rejected</strong> (ad length has a significant impact): If one ad length stands out—perhaps <code>30</code>-second ads lead to more frequent purchases—then focusing on that format would be a smart move. Longer ads could be used to tell better stories or create stronger connections with viewers, ensuring that the added length delivers value rather than just taking up more time.</p></li>
</ul>
</section>
</section>
<section id="limitations-and-uncertainties" class="level2">
<h2 class="anchored" data-anchor-id="limitations-and-uncertainties">Limitations and Uncertainties</h2>
<p>This Coca Cola research, while insightful, has some limitations and uncertainties that should be kept in mind when interpreting the results. First, the study focuses only on YouTube ads and their impact on Amazon sales and subscriptions, which means it doesn’t account for offline sales or customer behavior on other platforms. This could limit how broadly the findings apply to Coca-Cola’s overall performance in its global market. Additionally, external factors like competitor campaigns from Pepsi or Mountain Dew, seasonal trends, or changes in the world economy could influence the results, making it harder to confidently link the outcomes directly to our results. Another concern is the sample representativeness; while stratified by demographics and geography, it may not fully capture how different customer groups, such as younger audiences or those in underrepresented regions, respond to these ads. This makes our study only applicable to mostly first world countries that have access to electricity and modern technologies. Moreover, the three-month timeframe may only show short-term effects, leaving questions about the resilience of these strategies across a longer period of time. Lastly, the study examines ad frequency, type, and length but doesn’t consider other important factors like the content or tone of the ads, which could also play a big role. Because of these uncertainties, the results should be interpreted cautiously, with an understanding that they highlight correlations rather than definitive causes. Future research could address these gaps by exploring additional factors, extending the study period, or including a broader range of customer behaviors to further understand Coca-Cola’s relationship with its customers.</p>
</section>
</section>
<section id="simulation-of-effects" class="level1">
<h1><strong>Simulation of Effects</strong></h1>
<section id="q1-no-effect-t-test" class="level2">
<h2 class="anchored" data-anchor-id="q1-no-effect-t-test">Q1: No Effect (T-test)</h2>
<p>The first research question investigates whether increasing the number of YouTube advertisements from one to three per week has a major effect on New Flavor A Coca-Cola sales over a three-month period. We assessed this by comparing the mean sales of the Control (<code>1</code> ad per week) and Treatment (<code>3</code> advertisements per week) groups using simulations and Welch’s two-sample t-test. A no-impact scenario (identical sales means for both groups) and an effect scenario (Treatment group sales are <code>10%</code> higher) are the two circumstances in which the simulation produces accurate sales data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load libraries</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Set parameters</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)  <span class="co"># Set seed for reproducibility</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">800</span>  <span class="co"># Sample size (400 per group)</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>sd_sales <span class="ot">&lt;-</span> <span class="dv">500</span>  <span class="co"># Standard deviation</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>alpha <span class="ot">&lt;-</span> <span class="fl">0.05</span>  <span class="co"># Significance level</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to simulate multiple experiments</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>generate_multiple_experiments <span class="ot">&lt;-</span> <span class="cf">function</span>(effect_size, <span class="at">num_experiments =</span> <span class="dv">1000</span>, <span class="at">alpha =</span> <span class="fl">0.05</span>) {</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Initialize storage for all experiments</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>  all_results <span class="ot">&lt;-</span> <span class="fu">data.table</span>(</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">Experiment_ID =</span> <span class="fu">integer</span>(),</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">Effect =</span> <span class="fu">numeric</span>(),</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">P_value =</span> <span class="fu">numeric</span>(),</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">CI_Lower =</span> <span class="fu">numeric</span>(),</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">CI_Upper =</span> <span class="fu">numeric</span>()</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>  false_positives <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>  true_negatives <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Run multiple experiments</span></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>num_experiments) {</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Generate data for Treatment and Control groups</span></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>    treatment_sales <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n <span class="sc">/</span> <span class="dv">2</span>, <span class="at">mean =</span> <span class="dv">1000</span> <span class="sc">+</span> effect_size, <span class="at">sd =</span> sd_sales)</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>    control_sales <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n <span class="sc">/</span> <span class="dv">2</span>, <span class="at">mean =</span> <span class="dv">1000</span>, <span class="at">sd =</span> sd_sales)</span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Perform Welch's t-test</span></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>    t_test <span class="ot">&lt;-</span> <span class="fu">t.test</span>(treatment_sales, control_sales)</span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Store results</span></span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>    all_results <span class="ot">&lt;-</span> <span class="fu">rbind</span>(</span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>      all_results,</span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>      <span class="fu">data.table</span>(</span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>        <span class="at">Experiment_ID =</span> i,</span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a>        <span class="at">Effect =</span> <span class="fu">diff</span>(t_test<span class="sc">$</span>estimate),  <span class="co"># Difference in means</span></span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>        <span class="at">P_value =</span> t_test<span class="sc">$</span>p.value,        <span class="co"># P-value</span></span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a>        <span class="at">CI_Lower =</span> t_test<span class="sc">$</span>conf.int[<span class="dv">1</span>],  <span class="co"># Lower bound of CI</span></span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>        <span class="at">CI_Upper =</span> t_test<span class="sc">$</span>conf.int[<span class="dv">2</span>]   <span class="co"># Upper bound of CI</span></span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Update counters</span></span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (t_test<span class="sc">$</span>p.value <span class="sc">&lt;</span> alpha) {</span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a>      false_positives <span class="ot">&lt;-</span> false_positives <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a>      true_negatives <span class="ot">&lt;-</span> true_negatives <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate summary statistics</span></span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a>  fp_percentage <span class="ot">&lt;-</span> (false_positives <span class="sc">/</span> num_experiments) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb7-57"><a href="#cb7-57" aria-hidden="true" tabindex="-1"></a>  tn_percentage <span class="ot">&lt;-</span> (true_negatives <span class="sc">/</span> num_experiments) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb7-58"><a href="#cb7-58" aria-hidden="true" tabindex="-1"></a>  ci_mean_diff <span class="ot">&lt;-</span> <span class="fu">quantile</span>(all_results<span class="sc">$</span>Effect, <span class="at">probs =</span> <span class="fu">c</span>(<span class="fl">0.025</span>, <span class="fl">0.975</span>))</span>
<span id="cb7-59"><a href="#cb7-59" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-60"><a href="#cb7-60" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create summary table</span></span>
<span id="cb7-61"><a href="#cb7-61" aria-hidden="true" tabindex="-1"></a>  simulation_summary <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb7-62"><a href="#cb7-62" aria-hidden="true" tabindex="-1"></a>    <span class="at">Metric =</span> <span class="fu">c</span>(</span>
<span id="cb7-63"><a href="#cb7-63" aria-hidden="true" tabindex="-1"></a>      <span class="st">"True Difference in Means"</span>,</span>
<span id="cb7-64"><a href="#cb7-64" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Mean Estimated Difference"</span>,</span>
<span id="cb7-65"><a href="#cb7-65" aria-hidden="true" tabindex="-1"></a>      <span class="st">"95% Confidence Interval for Difference (Lower Bound)"</span>,</span>
<span id="cb7-66"><a href="#cb7-66" aria-hidden="true" tabindex="-1"></a>      <span class="st">"95% Confidence Interval for Difference (Upper Bound)"</span>,</span>
<span id="cb7-67"><a href="#cb7-67" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Percentage of False Positives"</span>,</span>
<span id="cb7-68"><a href="#cb7-68" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Percentage of True Negatives"</span></span>
<span id="cb7-69"><a href="#cb7-69" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb7-70"><a href="#cb7-70" aria-hidden="true" tabindex="-1"></a>    <span class="at">Value =</span> <span class="fu">c</span>(</span>
<span id="cb7-71"><a href="#cb7-71" aria-hidden="true" tabindex="-1"></a>      effect_size,  <span class="co"># True difference (no effect)</span></span>
<span id="cb7-72"><a href="#cb7-72" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>(all_results<span class="sc">$</span>Effect),</span>
<span id="cb7-73"><a href="#cb7-73" aria-hidden="true" tabindex="-1"></a>      ci_mean_diff[<span class="dv">1</span>],</span>
<span id="cb7-74"><a href="#cb7-74" aria-hidden="true" tabindex="-1"></a>      ci_mean_diff[<span class="dv">2</span>],</span>
<span id="cb7-75"><a href="#cb7-75" aria-hidden="true" tabindex="-1"></a>      fp_percentage,</span>
<span id="cb7-76"><a href="#cb7-76" aria-hidden="true" tabindex="-1"></a>      tn_percentage</span>
<span id="cb7-77"><a href="#cb7-77" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb7-78"><a href="#cb7-78" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-79"><a href="#cb7-79" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-80"><a href="#cb7-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(<span class="at">all_results =</span> all_results, <span class="at">summary =</span> simulation_summary))</span>
<span id="cb7-81"><a href="#cb7-81" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-82"><a href="#cb7-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-83"><a href="#cb7-83" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate results for 1000 experiments with no effect (effect_size = 0)</span></span>
<span id="cb7-84"><a href="#cb7-84" aria-hidden="true" tabindex="-1"></a>results <span class="ot">&lt;-</span> <span class="fu">generate_multiple_experiments</span>(<span class="at">effect_size =</span> <span class="dv">0</span>, <span class="at">num_experiments =</span> <span class="dv">1000</span>, <span class="at">alpha =</span> alpha)</span>
<span id="cb7-85"><a href="#cb7-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-86"><a href="#cb7-86" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the summary and display it</span></span>
<span id="cb7-87"><a href="#cb7-87" aria-hidden="true" tabindex="-1"></a>no_effect_summary <span class="ot">&lt;-</span> results<span class="sc">$</span>summary</span>
<span id="cb7-88"><a href="#cb7-88" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">--- Simulation Summary: No Effect ---</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
--- Simulation Summary: No Effect ---</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(no_effect_summary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                Metric        Value
1                             True Difference in Means   0.00000000
2                            Mean Estimated Difference   0.07283284
3 95% Confidence Interval for Difference (Lower Bound) -72.13063130
4 95% Confidence Interval for Difference (Upper Bound)  69.54312526
5                        Percentage of False Positives   5.60000000
6                         Percentage of True Negatives  94.40000000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the distribution of p-values</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(results<span class="sc">$</span>all_results, <span class="fu">aes</span>(<span class="at">x =</span> P_value)) <span class="sc">+</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">30</span>, <span class="at">fill =</span> <span class="st">"blue"</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Distribution of P-Values from 1000 Experiments (No Effect)"</span>,</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"P-Value"</span>,</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Frequency"</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="statistical_research_readme_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the distribution of estimated effects</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(results<span class="sc">$</span>all_results, <span class="fu">aes</span>(<span class="at">x =</span> Effect)) <span class="sc">+</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">30</span>, <span class="at">fill =</span> <span class="st">"green"</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Distribution of Estimated Differences in Means (No Effect)"</span>,</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Estimated Difference"</span>,</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Frequency"</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="statistical_research_readme_files/figure-html/unnamed-chunk-4-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="result-reflection" class="level4">
<h4 class="anchored" data-anchor-id="result-reflection">Result Reflection</h4>
<p>The simulation and t-test findings support the null hypothesis that there is no significant difference between the Control and Treatment groups in the no-effect scenario, where it is assumed that the treatment has no effect. The true effect in this scenario was <code>0.0000</code>, indicating no difference between the groups. The mean estimated effect over the simulations was <code>0.1775094</code>, which suggests a small observed difference, though this could be attributed to random fluctuation. The 95% confidence interval for the estimated effect ranged from <code>-77.3267264</code> to <code>81.7152131</code>, indicating a wide range of possible values that includes zero, further supporting the conclusion of no significant effect. The false positive rate was <code>5.8%</code>, which is within the typical significance threshold of <code>5%</code>, while <code>94.2%</code> of tests correctly detected no effect. These results suggest that the observed difference is likely due to random variation, as no true treatment effect was detected.</p>
</section>
</section>
<section id="q1-effect-t-test" class="level2">
<h2 class="anchored" data-anchor-id="q1-effect-t-test">Q1 Effect (T-test)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load libraries</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Set parameters</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)  <span class="co"># Set seed for reproducibility</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">800</span>  <span class="co"># Sample size (400 per group)</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>sd_sales <span class="ot">&lt;-</span> <span class="dv">500</span>  <span class="co"># Standard deviation</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>alpha <span class="ot">&lt;-</span> <span class="fl">0.05</span>  <span class="co"># Significance level</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to simulate multiple experiments with effect</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>generate_multiple_experiments <span class="ot">&lt;-</span> <span class="cf">function</span>(effect_size, <span class="at">num_experiments =</span> <span class="dv">1000</span>) {</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Initialize storage for all experiments</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>  all_results <span class="ot">&lt;-</span> <span class="fu">data.table</span>(</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">Experiment_ID =</span> <span class="fu">integer</span>(),</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">Effect =</span> <span class="fu">numeric</span>(),</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">P_value =</span> <span class="fu">numeric</span>(),</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">CI_Lower =</span> <span class="fu">numeric</span>(),</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">CI_Upper =</span> <span class="fu">numeric</span>()</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Counters for false positives and true negatives</span></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>  true_positives <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>  false_negatives <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Run multiple experiments</span></span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>num_experiments) {</span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Generate data for Treatment and Control groups</span></span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>    treatment_sales <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n <span class="sc">/</span> <span class="dv">2</span>, <span class="at">mean =</span> <span class="dv">1000</span> <span class="sc">+</span> effect_size, <span class="at">sd =</span> sd_sales)</span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>    control_sales <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n <span class="sc">/</span> <span class="dv">2</span>, <span class="at">mean =</span> <span class="dv">1000</span>, <span class="at">sd =</span> sd_sales)</span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Perform Welch's t-test</span></span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a>    t_test <span class="ot">&lt;-</span> <span class="fu">t.test</span>(treatment_sales, control_sales)</span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Update counters</span></span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (t_test<span class="sc">$</span>p.value <span class="sc">&lt;</span> alpha) {</span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a>      true_positives <span class="ot">&lt;-</span> true_positives <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true" tabindex="-1"></a>      false_negatives <span class="ot">&lt;-</span> false_negatives <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb13-41"><a href="#cb13-41" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb13-42"><a href="#cb13-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-43"><a href="#cb13-43" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Store results</span></span>
<span id="cb13-44"><a href="#cb13-44" aria-hidden="true" tabindex="-1"></a>    all_results <span class="ot">&lt;-</span> <span class="fu">rbind</span>(</span>
<span id="cb13-45"><a href="#cb13-45" aria-hidden="true" tabindex="-1"></a>      all_results,</span>
<span id="cb13-46"><a href="#cb13-46" aria-hidden="true" tabindex="-1"></a>      <span class="fu">data.table</span>(</span>
<span id="cb13-47"><a href="#cb13-47" aria-hidden="true" tabindex="-1"></a>        <span class="at">Experiment_ID =</span> i,</span>
<span id="cb13-48"><a href="#cb13-48" aria-hidden="true" tabindex="-1"></a>        <span class="at">Effect =</span> <span class="fu">diff</span>(t_test<span class="sc">$</span>estimate),  <span class="co"># Difference in means</span></span>
<span id="cb13-49"><a href="#cb13-49" aria-hidden="true" tabindex="-1"></a>        <span class="at">P_value =</span> t_test<span class="sc">$</span>p.value,        <span class="co"># P-value</span></span>
<span id="cb13-50"><a href="#cb13-50" aria-hidden="true" tabindex="-1"></a>        <span class="at">CI_Lower =</span> t_test<span class="sc">$</span>conf.int[<span class="dv">1</span>],  <span class="co"># Lower bound of CI</span></span>
<span id="cb13-51"><a href="#cb13-51" aria-hidden="true" tabindex="-1"></a>        <span class="at">CI_Upper =</span> t_test<span class="sc">$</span>conf.int[<span class="dv">2</span>]   <span class="co"># Upper bound of CI</span></span>
<span id="cb13-52"><a href="#cb13-52" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb13-53"><a href="#cb13-53" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb13-54"><a href="#cb13-54" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb13-55"><a href="#cb13-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-56"><a href="#cb13-56" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate summary statistics</span></span>
<span id="cb13-57"><a href="#cb13-57" aria-hidden="true" tabindex="-1"></a>  mean_effect <span class="ot">&lt;-</span> <span class="fu">mean</span>(all_results<span class="sc">$</span>Effect)</span>
<span id="cb13-58"><a href="#cb13-58" aria-hidden="true" tabindex="-1"></a>  ci_mean_diff <span class="ot">&lt;-</span> <span class="fu">quantile</span>(all_results<span class="sc">$</span>Effect, <span class="at">probs =</span> <span class="fu">c</span>(<span class="fl">0.025</span>, <span class="fl">0.975</span>))</span>
<span id="cb13-59"><a href="#cb13-59" aria-hidden="true" tabindex="-1"></a>  tp_percentage <span class="ot">&lt;-</span> (true_positives <span class="sc">/</span> num_experiments) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb13-60"><a href="#cb13-60" aria-hidden="true" tabindex="-1"></a>  fn_percentage <span class="ot">&lt;-</span> (false_negatives <span class="sc">/</span> num_experiments) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb13-61"><a href="#cb13-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-62"><a href="#cb13-62" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create summary table</span></span>
<span id="cb13-63"><a href="#cb13-63" aria-hidden="true" tabindex="-1"></a>  simulation_summary <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb13-64"><a href="#cb13-64" aria-hidden="true" tabindex="-1"></a>    <span class="at">Metric =</span> <span class="fu">c</span>(</span>
<span id="cb13-65"><a href="#cb13-65" aria-hidden="true" tabindex="-1"></a>      <span class="st">"True Difference in Means"</span>,</span>
<span id="cb13-66"><a href="#cb13-66" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Mean Estimated Difference"</span>,</span>
<span id="cb13-67"><a href="#cb13-67" aria-hidden="true" tabindex="-1"></a>      <span class="st">"95% Confidence Interval for Difference (Lower Bound)"</span>,</span>
<span id="cb13-68"><a href="#cb13-68" aria-hidden="true" tabindex="-1"></a>      <span class="st">"95% Confidence Interval for Difference (Upper Bound)"</span>,</span>
<span id="cb13-69"><a href="#cb13-69" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Percentage of True Positives"</span>,</span>
<span id="cb13-70"><a href="#cb13-70" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Percentage of False Negatives"</span></span>
<span id="cb13-71"><a href="#cb13-71" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb13-72"><a href="#cb13-72" aria-hidden="true" tabindex="-1"></a>    <span class="at">Value =</span> <span class="fu">c</span>(</span>
<span id="cb13-73"><a href="#cb13-73" aria-hidden="true" tabindex="-1"></a>      effect_size,  <span class="co"># True difference</span></span>
<span id="cb13-74"><a href="#cb13-74" aria-hidden="true" tabindex="-1"></a>      mean_effect,</span>
<span id="cb13-75"><a href="#cb13-75" aria-hidden="true" tabindex="-1"></a>      ci_mean_diff[<span class="dv">1</span>],</span>
<span id="cb13-76"><a href="#cb13-76" aria-hidden="true" tabindex="-1"></a>      ci_mean_diff[<span class="dv">2</span>],</span>
<span id="cb13-77"><a href="#cb13-77" aria-hidden="true" tabindex="-1"></a>      tp_percentage,</span>
<span id="cb13-78"><a href="#cb13-78" aria-hidden="true" tabindex="-1"></a>      fn_percentage</span>
<span id="cb13-79"><a href="#cb13-79" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb13-80"><a href="#cb13-80" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb13-81"><a href="#cb13-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-82"><a href="#cb13-82" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(<span class="at">results =</span> all_results, <span class="at">summary =</span> simulation_summary))</span>
<span id="cb13-83"><a href="#cb13-83" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb13-84"><a href="#cb13-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-85"><a href="#cb13-85" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate results for 1000 experiments with an effect (e.g., effect_size = 100)</span></span>
<span id="cb13-86"><a href="#cb13-86" aria-hidden="true" tabindex="-1"></a>simulation_results <span class="ot">&lt;-</span> <span class="fu">generate_multiple_experiments</span>(<span class="at">effect_size =</span> <span class="dv">100</span>, <span class="at">num_experiments =</span> <span class="dv">1000</span>)</span>
<span id="cb13-87"><a href="#cb13-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-88"><a href="#cb13-88" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract and display the summary table</span></span>
<span id="cb13-89"><a href="#cb13-89" aria-hidden="true" tabindex="-1"></a>simulation_summary <span class="ot">&lt;-</span> simulation_results<span class="sc">$</span>summary</span>
<span id="cb13-90"><a href="#cb13-90" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">--- Simulation Summary ---</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
--- Simulation Summary ---</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(simulation_summary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                Metric      Value
1                             True Difference in Means  100.00000
2                            Mean Estimated Difference  -99.92717
3 95% Confidence Interval for Difference (Lower Bound) -172.13063
4 95% Confidence Interval for Difference (Upper Bound)  -30.45687
5                         Percentage of True Positives   81.50000
6                        Percentage of False Negatives   18.50000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the distribution of p-values</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(simulation_results<span class="sc">$</span>results, <span class="fu">aes</span>(<span class="at">x =</span> P_value)) <span class="sc">+</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">30</span>, <span class="at">fill =</span> <span class="st">"blue"</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Distribution of P-Values from 1000 Experiments"</span>,</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"P-Value"</span>,</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Frequency"</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="statistical_research_readme_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the distribution of effect sizes</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(simulation_results<span class="sc">$</span>results, <span class="fu">aes</span>(<span class="at">x =</span> Effect)) <span class="sc">+</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">30</span>, <span class="at">fill =</span> <span class="st">"green"</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Distribution of Effect Sizes from 1000 Experiments"</span>,</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Effect Size"</span>,</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Frequency"</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="statistical_research_readme_files/figure-html/unnamed-chunk-5-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="result-reflection-1" class="level4">
<h4 class="anchored" data-anchor-id="result-reflection-1">Result Reflection</h4>
<p>The simulation and t-test findings support the alternative hypothesis that there is a significant difference between the Control and Treatment groups in the with-effect scenario, where it is assumed that the treatment has an effect. The true effect in this scenario was <code>100</code>, indicating a real difference between the groups. However, the mean estimated effect over the simulations was <code>-99.82249</code>, suggesting that the observed difference was in the opposite direction of the true effect, likely due to random fluctuation or sampling error.</p>
<p>The 95% confidence interval for the estimated effect ranged from <code>-177.32673</code> to <code>-18.28479</code>, which does not include zero, suggesting that the observed difference is statistically significant and unlikely to be the result of random chance. The interval further confirms the negative direction of the estimated effect. Percentage of False Positive is <code>69.3%</code>. Percentage of True Negative is <code>30.7%</code></p>
<p>Despite the observed significant difference, the mean estimated effect being negative implies that the treatment effect may not have worked as expected, or the result could be influenced by sampling variation. Further investigation may be necessary to understand the true nature of the effect in this scenario.</p>
</section>
</section>
<section id="q2-no-effect-proportion-test" class="level2">
<h2 class="anchored" data-anchor-id="q2-no-effect-proportion-test">Q2 No effect (Proportion Test)</h2>
<p>Research Question 2 investigates whether the percentage of New Flavor A Coca-Cola automatic subscriptions on Amazon during a three-month period is significantly impacted by the kind of YouTube advertisement (skippable vs.&nbsp;non-skippable). We assessed this by comparing the subscription rates of the two ad kinds using simulations and a two-sample proportion test. Two scenarios were represented by the simulations: an effect scenario, in which non-skippable advertising result in a <code>15%</code> increase in subscription rates, and a no-effect scenario, in which subscription rates are the same for both groups. The code used R to create binary subscription data (𝑟𝑏𝑖𝑛𝑜𝑚rbinom), compute important metrics including mean effects, confidence intervals, false positives, true negatives, and false positives, and conduct percentage tests. This method guarantees a thorough, data-driven assessment of the impact of the ad type on subscriptions.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load libraries</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Set parameters</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)  <span class="co"># For reproducibility</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">800</span>  <span class="co"># Sample size per group</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>p_skippable_no_effect <span class="ot">&lt;-</span> <span class="fl">0.33</span>  <span class="co"># Subscription rate for skippable ads</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>p_non_skippable_no_effect <span class="ot">&lt;-</span> <span class="fl">0.33</span>  <span class="co"># Subscription rate for non-skippable ads</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>num_simulations <span class="ot">&lt;-</span> <span class="dv">1000</span>  <span class="co"># Number of simulations</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>alpha <span class="ot">&lt;-</span> <span class="fl">0.05</span>  <span class="co"># Significance level</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Function for "No Effect" Proportion Test</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>simulate_no_effect_proportion <span class="ot">&lt;-</span> <span class="cf">function</span>(p_skippable, p_non_skippable, n, num_simulations, alpha) {</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Initialize variables</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>  prop_differences <span class="ot">&lt;-</span> <span class="fu">numeric</span>(num_simulations)</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>  p_values <span class="ot">&lt;-</span> <span class="fu">numeric</span>(num_simulations)</span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>  false_positives <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>  true_negatives <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Simulate multiple experiments</span></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>num_simulations) {</span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Generate data for Skippable and Non-Skippable groups</span></span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>    skippable <span class="ot">&lt;-</span> <span class="fu">rbinom</span>(n, <span class="at">size =</span> <span class="dv">1</span>, <span class="at">prob =</span> p_skippable)</span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>    non_skippable <span class="ot">&lt;-</span> <span class="fu">rbinom</span>(n, <span class="at">size =</span> <span class="dv">1</span>, <span class="at">prob =</span> p_non_skippable)</span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Perform proportion test</span></span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>    test_result <span class="ot">&lt;-</span> <span class="fu">prop.test</span>(</span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="fu">c</span>(<span class="fu">sum</span>(skippable), <span class="fu">sum</span>(non_skippable)),</span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a>      <span class="at">n =</span> <span class="fu">c</span>(<span class="fu">length</span>(skippable), <span class="fu">length</span>(non_skippable))</span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb19-34"><a href="#cb19-34" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Store results</span></span>
<span id="cb19-35"><a href="#cb19-35" aria-hidden="true" tabindex="-1"></a>    prop_differences[i] <span class="ot">&lt;-</span> <span class="fu">diff</span>(test_result<span class="sc">$</span>estimate)  <span class="co"># Difference in proportions</span></span>
<span id="cb19-36"><a href="#cb19-36" aria-hidden="true" tabindex="-1"></a>    p_values[i] <span class="ot">&lt;-</span> test_result<span class="sc">$</span>p.value</span>
<span id="cb19-37"><a href="#cb19-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-38"><a href="#cb19-38" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Update counters</span></span>
<span id="cb19-39"><a href="#cb19-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (test_result<span class="sc">$</span>p.value <span class="sc">&lt;</span> alpha) {</span>
<span id="cb19-40"><a href="#cb19-40" aria-hidden="true" tabindex="-1"></a>      false_positives <span class="ot">&lt;-</span> false_positives <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb19-41"><a href="#cb19-41" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb19-42"><a href="#cb19-42" aria-hidden="true" tabindex="-1"></a>      true_negatives <span class="ot">&lt;-</span> true_negatives <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb19-43"><a href="#cb19-43" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb19-44"><a href="#cb19-44" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb19-45"><a href="#cb19-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-46"><a href="#cb19-46" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate summary statistics</span></span>
<span id="cb19-47"><a href="#cb19-47" aria-hidden="true" tabindex="-1"></a>  fp_percentage <span class="ot">&lt;-</span> (false_positives <span class="sc">/</span> num_simulations) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb19-48"><a href="#cb19-48" aria-hidden="true" tabindex="-1"></a>  tn_percentage <span class="ot">&lt;-</span> (true_negatives <span class="sc">/</span> num_simulations) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb19-49"><a href="#cb19-49" aria-hidden="true" tabindex="-1"></a>  ci_mean_diff <span class="ot">&lt;-</span> <span class="fu">quantile</span>(prop_differences, <span class="at">probs =</span> <span class="fu">c</span>(<span class="fl">0.025</span>, <span class="fl">0.975</span>))</span>
<span id="cb19-50"><a href="#cb19-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-51"><a href="#cb19-51" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create summary table</span></span>
<span id="cb19-52"><a href="#cb19-52" aria-hidden="true" tabindex="-1"></a>  simulation_summary <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb19-53"><a href="#cb19-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">Metric =</span> <span class="fu">c</span>(</span>
<span id="cb19-54"><a href="#cb19-54" aria-hidden="true" tabindex="-1"></a>      <span class="st">"True Difference in Proportions"</span>,</span>
<span id="cb19-55"><a href="#cb19-55" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Mean Estimated Difference"</span>,</span>
<span id="cb19-56"><a href="#cb19-56" aria-hidden="true" tabindex="-1"></a>      <span class="st">"95% Confidence Interval for Difference (Lower Bound)"</span>,</span>
<span id="cb19-57"><a href="#cb19-57" aria-hidden="true" tabindex="-1"></a>      <span class="st">"95% Confidence Interval for Difference (Upper Bound)"</span>,</span>
<span id="cb19-58"><a href="#cb19-58" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Percentage of False Positives"</span>,</span>
<span id="cb19-59"><a href="#cb19-59" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Percentage of True Negatives"</span></span>
<span id="cb19-60"><a href="#cb19-60" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb19-61"><a href="#cb19-61" aria-hidden="true" tabindex="-1"></a>    <span class="at">Value =</span> <span class="fu">c</span>(</span>
<span id="cb19-62"><a href="#cb19-62" aria-hidden="true" tabindex="-1"></a>      <span class="dv">0</span>,  <span class="co"># True difference (no effect)</span></span>
<span id="cb19-63"><a href="#cb19-63" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>(prop_differences),</span>
<span id="cb19-64"><a href="#cb19-64" aria-hidden="true" tabindex="-1"></a>      ci_mean_diff[<span class="dv">1</span>],</span>
<span id="cb19-65"><a href="#cb19-65" aria-hidden="true" tabindex="-1"></a>      ci_mean_diff[<span class="dv">2</span>],</span>
<span id="cb19-66"><a href="#cb19-66" aria-hidden="true" tabindex="-1"></a>      fp_percentage,</span>
<span id="cb19-67"><a href="#cb19-67" aria-hidden="true" tabindex="-1"></a>      tn_percentage</span>
<span id="cb19-68"><a href="#cb19-68" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb19-69"><a href="#cb19-69" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb19-70"><a href="#cb19-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-71"><a href="#cb19-71" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(<span class="at">summary =</span> simulation_summary, <span class="at">differences =</span> prop_differences, <span class="at">p_values =</span> p_values))</span>
<span id="cb19-72"><a href="#cb19-72" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb19-73"><a href="#cb19-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-74"><a href="#cb19-74" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the simulation for "No Effect"</span></span>
<span id="cb19-75"><a href="#cb19-75" aria-hidden="true" tabindex="-1"></a>no_effect_results <span class="ot">&lt;-</span> <span class="fu">simulate_no_effect_proportion</span>(</span>
<span id="cb19-76"><a href="#cb19-76" aria-hidden="true" tabindex="-1"></a>  <span class="at">p_skippable =</span> p_skippable_no_effect,</span>
<span id="cb19-77"><a href="#cb19-77" aria-hidden="true" tabindex="-1"></a>  <span class="at">p_non_skippable =</span> p_non_skippable_no_effect,</span>
<span id="cb19-78"><a href="#cb19-78" aria-hidden="true" tabindex="-1"></a>  <span class="at">n =</span> n,</span>
<span id="cb19-79"><a href="#cb19-79" aria-hidden="true" tabindex="-1"></a>  <span class="at">num_simulations =</span> num_simulations,</span>
<span id="cb19-80"><a href="#cb19-80" aria-hidden="true" tabindex="-1"></a>  <span class="at">alpha =</span> alpha</span>
<span id="cb19-81"><a href="#cb19-81" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-82"><a href="#cb19-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-83"><a href="#cb19-83" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the summary and display it</span></span>
<span id="cb19-84"><a href="#cb19-84" aria-hidden="true" tabindex="-1"></a>no_effect_summary <span class="ot">&lt;-</span> no_effect_results<span class="sc">$</span>summary</span>
<span id="cb19-85"><a href="#cb19-85" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">--- Simulation Summary: No Effect ---</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
--- Simulation Summary: No Effect ---</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(no_effect_summary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                Metric      Value
1                       True Difference in Proportions  0.0000000
2                            Mean Estimated Difference -0.0002575
3 95% Confidence Interval for Difference (Lower Bound) -0.0475000
4 95% Confidence Interval for Difference (Upper Bound)  0.0462500
5                        Percentage of False Positives  4.8000000
6                         Percentage of True Negatives 95.2000000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a data table for experiment-level results</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>experiment_results <span class="ot">&lt;-</span> <span class="fu">data.table</span>(</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Experiment_ID =</span> <span class="dv">1</span><span class="sc">:</span>num_simulations,</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Prop_Difference =</span> no_effect_results<span class="sc">$</span>differences,</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">P_value =</span> no_effect_results<span class="sc">$</span>p_values</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the distribution of p-values</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(experiment_results, <span class="fu">aes</span>(<span class="at">x =</span> P_value)) <span class="sc">+</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">30</span>, <span class="at">fill =</span> <span class="st">"blue"</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Distribution of P-Values from 1000 Experiments (No Effect)"</span>,</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"P-Value"</span>,</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Frequency"</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="statistical_research_readme_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the distribution of proportion differences</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(experiment_results, <span class="fu">aes</span>(<span class="at">x =</span> Prop_Difference)) <span class="sc">+</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">30</span>, <span class="at">fill =</span> <span class="st">"green"</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Distribution of Proportion Differences (No Effect)"</span>,</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Proportion Difference"</span>,</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Frequency"</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="statistical_research_readme_files/figure-html/unnamed-chunk-6-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="result-reflection-2" class="level4">
<h4 class="anchored" data-anchor-id="result-reflection-2">Result Reflection</h4>
<p>The simulation and proportion test findings support the null hypothesis that there is no significant difference between the Control and Treatment groups in the no-effect scenario, where it is assumed that the treatment has no effect. The true effect in this scenario was <code>0.0000</code>, indicating no difference between the groups. The mean estimated effect over the simulations was <code>0.001</code>, suggesting a very small observed difference.</p>
<p>The 95% confidence interval for the estimated effect ranged from <code>-0.0518</code> to <code>0.0536</code>, which includes zero, indicating that the observed difference could easily be the result of random fluctuation. This wide confidence interval further supports the conclusion that there is no significant treatment effect.</p>
<p>The false positive rate was <code>3.6%</code>, which is below the typical significance threshold of <code>5%</code>, and <code>96.4%</code> of tests correctly detected no effect. These results suggest that the observed difference is likely due to random chance rather than any true treatment effect, supporting the null hypothesis that there is no significant difference between the groups.</p>
</section>
</section>
<section id="q2-effect" class="level2">
<h2 class="anchored" data-anchor-id="q2-effect">Q2 Effect</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set parameters for "With Effect"</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)  <span class="co"># For reproducibility</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">800</span>  <span class="co"># Sample size per group</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>p_skippable_with_effect <span class="ot">&lt;-</span> <span class="fl">0.33</span>  <span class="co"># Subscription rate for skippable ads</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>p_non_skippable_with_effect <span class="ot">&lt;-</span> <span class="fl">0.4</span>  <span class="co"># Subscription rate for non-skippable ads (introduce effect)</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>num_simulations <span class="ot">&lt;-</span> <span class="dv">1000</span>  <span class="co"># Number of simulations</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>alpha <span class="ot">&lt;-</span> <span class="fl">0.05</span>  <span class="co"># Significance level</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Function for "With Effect" Proportion Test</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>simulate_with_effect_proportion <span class="ot">&lt;-</span> <span class="cf">function</span>(p_skippable, p_non_skippable, n, num_simulations, alpha) {</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Initialize variables</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>  prop_differences <span class="ot">&lt;-</span> <span class="fu">numeric</span>(num_simulations)</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>  p_values <span class="ot">&lt;-</span> <span class="fu">numeric</span>(num_simulations)</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>  true_positives <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>  false_negatives <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Simulate multiple experiments</span></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>num_simulations) {</span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Generate data for Skippable and Non-Skippable groups</span></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>    skippable <span class="ot">&lt;-</span> <span class="fu">rbinom</span>(n, <span class="at">size =</span> <span class="dv">1</span>, <span class="at">prob =</span> p_skippable)</span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>    non_skippable <span class="ot">&lt;-</span> <span class="fu">rbinom</span>(n, <span class="at">size =</span> <span class="dv">1</span>, <span class="at">prob =</span> p_non_skippable)</span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Perform proportion test</span></span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>    test_result <span class="ot">&lt;-</span> <span class="fu">prop.test</span>(</span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="fu">c</span>(<span class="fu">sum</span>(skippable), <span class="fu">sum</span>(non_skippable)),</span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a>      <span class="at">n =</span> <span class="fu">c</span>(<span class="fu">length</span>(skippable), <span class="fu">length</span>(non_skippable))</span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Store results</span></span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a>    prop_differences[i] <span class="ot">&lt;-</span> <span class="fu">diff</span>(test_result<span class="sc">$</span>estimate)  <span class="co"># Difference in proportions</span></span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a>    p_values[i] <span class="ot">&lt;-</span> test_result<span class="sc">$</span>p.value</span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Update counters</span></span>
<span id="cb25-34"><a href="#cb25-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (test_result<span class="sc">$</span>p.value <span class="sc">&lt;</span> alpha) {</span>
<span id="cb25-35"><a href="#cb25-35" aria-hidden="true" tabindex="-1"></a>      true_positives <span class="ot">&lt;-</span> true_positives <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb25-36"><a href="#cb25-36" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb25-37"><a href="#cb25-37" aria-hidden="true" tabindex="-1"></a>      false_negatives <span class="ot">&lt;-</span> false_negatives <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb25-38"><a href="#cb25-38" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb25-39"><a href="#cb25-39" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb25-40"><a href="#cb25-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-41"><a href="#cb25-41" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate summary statistics</span></span>
<span id="cb25-42"><a href="#cb25-42" aria-hidden="true" tabindex="-1"></a>  tp_percentage <span class="ot">&lt;-</span> (true_positives <span class="sc">/</span> num_simulations) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb25-43"><a href="#cb25-43" aria-hidden="true" tabindex="-1"></a>  fn_percentage <span class="ot">&lt;-</span> (false_negatives <span class="sc">/</span> num_simulations) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb25-44"><a href="#cb25-44" aria-hidden="true" tabindex="-1"></a>  ci_mean_diff <span class="ot">&lt;-</span> <span class="fu">quantile</span>(prop_differences, <span class="at">probs =</span> <span class="fu">c</span>(<span class="fl">0.025</span>, <span class="fl">0.975</span>))</span>
<span id="cb25-45"><a href="#cb25-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-46"><a href="#cb25-46" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create summary table</span></span>
<span id="cb25-47"><a href="#cb25-47" aria-hidden="true" tabindex="-1"></a>  simulation_summary <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb25-48"><a href="#cb25-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">Metric =</span> <span class="fu">c</span>(</span>
<span id="cb25-49"><a href="#cb25-49" aria-hidden="true" tabindex="-1"></a>      <span class="st">"True Difference in Proportions"</span>,</span>
<span id="cb25-50"><a href="#cb25-50" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Mean Estimated Difference"</span>,</span>
<span id="cb25-51"><a href="#cb25-51" aria-hidden="true" tabindex="-1"></a>      <span class="st">"95% Confidence Interval for Difference (Lower Bound)"</span>,</span>
<span id="cb25-52"><a href="#cb25-52" aria-hidden="true" tabindex="-1"></a>      <span class="st">"95% Confidence Interval for Difference (Upper Bound)"</span>,</span>
<span id="cb25-53"><a href="#cb25-53" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Percentage of True Positives"</span>,</span>
<span id="cb25-54"><a href="#cb25-54" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Percentage of False Negatives"</span></span>
<span id="cb25-55"><a href="#cb25-55" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb25-56"><a href="#cb25-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">Value =</span> <span class="fu">c</span>(</span>
<span id="cb25-57"><a href="#cb25-57" aria-hidden="true" tabindex="-1"></a>      p_non_skippable <span class="sc">-</span> p_skippable,  <span class="co"># True difference</span></span>
<span id="cb25-58"><a href="#cb25-58" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>(prop_differences),</span>
<span id="cb25-59"><a href="#cb25-59" aria-hidden="true" tabindex="-1"></a>      ci_mean_diff[<span class="dv">1</span>],</span>
<span id="cb25-60"><a href="#cb25-60" aria-hidden="true" tabindex="-1"></a>      ci_mean_diff[<span class="dv">2</span>],</span>
<span id="cb25-61"><a href="#cb25-61" aria-hidden="true" tabindex="-1"></a>      tp_percentage,</span>
<span id="cb25-62"><a href="#cb25-62" aria-hidden="true" tabindex="-1"></a>      fn_percentage</span>
<span id="cb25-63"><a href="#cb25-63" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb25-64"><a href="#cb25-64" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb25-65"><a href="#cb25-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-66"><a href="#cb25-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(<span class="at">summary =</span> simulation_summary, <span class="at">differences =</span> prop_differences, <span class="at">p_values =</span> p_values))</span>
<span id="cb25-67"><a href="#cb25-67" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb25-68"><a href="#cb25-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-69"><a href="#cb25-69" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the simulation for "With Effect"</span></span>
<span id="cb25-70"><a href="#cb25-70" aria-hidden="true" tabindex="-1"></a>with_effect_results <span class="ot">&lt;-</span> <span class="fu">simulate_with_effect_proportion</span>(</span>
<span id="cb25-71"><a href="#cb25-71" aria-hidden="true" tabindex="-1"></a>  <span class="at">p_skippable =</span> p_skippable_with_effect,</span>
<span id="cb25-72"><a href="#cb25-72" aria-hidden="true" tabindex="-1"></a>  <span class="at">p_non_skippable =</span> p_non_skippable_with_effect,</span>
<span id="cb25-73"><a href="#cb25-73" aria-hidden="true" tabindex="-1"></a>  <span class="at">n =</span> n,</span>
<span id="cb25-74"><a href="#cb25-74" aria-hidden="true" tabindex="-1"></a>  <span class="at">num_simulations =</span> num_simulations,</span>
<span id="cb25-75"><a href="#cb25-75" aria-hidden="true" tabindex="-1"></a>  <span class="at">alpha =</span> alpha</span>
<span id="cb25-76"><a href="#cb25-76" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-77"><a href="#cb25-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-78"><a href="#cb25-78" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the summary and display it</span></span>
<span id="cb25-79"><a href="#cb25-79" aria-hidden="true" tabindex="-1"></a>with_effect_summary <span class="ot">&lt;-</span> with_effect_results<span class="sc">$</span>summary</span>
<span id="cb25-80"><a href="#cb25-80" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">--- Simulation Summary: With Effect ---</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
--- Simulation Summary: With Effect ---</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(with_effect_summary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                Metric      Value
1                       True Difference in Proportions  0.0700000
2                            Mean Estimated Difference  0.0694225
3 95% Confidence Interval for Difference (Lower Bound)  0.0187500
4 95% Confidence Interval for Difference (Upper Bound)  0.1150313
5                         Percentage of True Positives 81.4000000
6                        Percentage of False Negatives 18.6000000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a data table for experiment-level results</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>experiment_results <span class="ot">&lt;-</span> <span class="fu">data.table</span>(</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Experiment_ID =</span> <span class="dv">1</span><span class="sc">:</span>num_simulations,</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Prop_Difference =</span> with_effect_results<span class="sc">$</span>differences,</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">P_value =</span> with_effect_results<span class="sc">$</span>p_values</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the distribution of proportion differences</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(experiment_results, <span class="fu">aes</span>(<span class="at">x =</span> Prop_Difference)) <span class="sc">+</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">30</span>, <span class="at">fill =</span> <span class="st">"green"</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Distribution of Proportion Differences (With Effect)"</span>,</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Proportion Difference"</span>,</span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Frequency"</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="statistical_research_readme_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="result-reflection-3" class="level4">
<h4 class="anchored" data-anchor-id="result-reflection-3">Result Reflection</h4>
<p>The simulation and proportion test suggest a small treatment effect in the with-effect scenario, where the true effect was <code>0.05</code>. The mean estimated effect was <code>0.0512</code>, showing a slight difference, but the 95% confidence interval ranged from <code>-0.0017</code> to <code>0.1054</code>, meaning the effect could still be close to zero. Only <code>40.8%</code> of the tests detected the effect, with <code>59.2%</code> failing to do so. This means the treatment might have an effect, but it’s hard to consistently detect, likely due to its small size.</p>
</section>
</section>
<section id="q3-no-effect-chi-squared-test-of-independence" class="level2">
<h2 class="anchored" data-anchor-id="q3-no-effect-chi-squared-test-of-independence">Q3 No effect (Chi Squared Test of Independence)</h2>
<p>The third research question investigates whether the duration of YouTube advertisements (<code>10</code> vs.&nbsp;<code>30</code> seconds) has a significant effect on the frequency of weekly online purchases made by each client on Amazon during a three-month period. We assessed this by comparing the weekly purchase proportions across the two ad durations using simulations and a chi-square test. Two possibilities were represented by the simulations: an effect scenario, in which <code>30</code>-second advertisements result in a <code>10%</code> greater purchase percentage, and a no-impact scenario, in which buy proportions are identical for both ad lengths. The code created binary purchase data (𝑟𝑏𝑖𝑛𝑜𝑚rbinom) using R, ran chi-square tests, and computed metrics including mean effects, confidence intervals, false positives, true negatives, and false negatives. This method guarantees a thorough, data-driven assessment of how ad duration affects the frequency of purchases.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set parameters</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">482</span>  <span class="co"># Sample size per group</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>p_short_ad_no_effect <span class="ot">&lt;-</span> <span class="fl">0.5</span>  <span class="co"># Weekly online purchase frequency for 10s ads</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>p_long_ad_no_effect <span class="ot">&lt;-</span> <span class="fl">0.5</span>  <span class="co"># Weekly online purchase frequency for 30s ads</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>num_simulations <span class="ot">&lt;-</span> <span class="dv">1000</span>  <span class="co"># Number of simulations</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>alpha <span class="ot">&lt;-</span> <span class="fl">0.05</span>  <span class="co"># Significance level</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Function for "No Effect" Chi-Squared Test</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>simulate_no_effect_chi_squared <span class="ot">&lt;-</span> <span class="cf">function</span>(p_short_ad, p_long_ad, n, num_simulations, alpha) {</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Initialize variables</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>  chi_squared_statistics <span class="ot">&lt;-</span> <span class="fu">numeric</span>(num_simulations)</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>  p_values <span class="ot">&lt;-</span> <span class="fu">numeric</span>(num_simulations)</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>  false_positives <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>  true_negatives <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Simulate multiple experiments</span></span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>num_simulations) {</span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Generate data for Short Ads and Long Ads groups</span></span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a>    short_ads <span class="ot">&lt;-</span> <span class="fu">rbinom</span>(n, <span class="at">size =</span> <span class="dv">1</span>, <span class="at">prob =</span> p_short_ad)</span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a>    long_ads <span class="ot">&lt;-</span> <span class="fu">rbinom</span>(n, <span class="at">size =</span> <span class="dv">1</span>, <span class="at">prob =</span> p_long_ad)</span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create a contingency table</span></span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a>    contingency_table <span class="ot">&lt;-</span> <span class="fu">matrix</span>(</span>
<span id="cb30-25"><a href="#cb30-25" aria-hidden="true" tabindex="-1"></a>      <span class="fu">c</span>(<span class="fu">sum</span>(short_ads), n <span class="sc">-</span> <span class="fu">sum</span>(short_ads),</span>
<span id="cb30-26"><a href="#cb30-26" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sum</span>(long_ads), n <span class="sc">-</span> <span class="fu">sum</span>(long_ads)),</span>
<span id="cb30-27"><a href="#cb30-27" aria-hidden="true" tabindex="-1"></a>      <span class="at">nrow =</span> <span class="dv">2</span>,</span>
<span id="cb30-28"><a href="#cb30-28" aria-hidden="true" tabindex="-1"></a>      <span class="at">byrow =</span> <span class="cn">TRUE</span></span>
<span id="cb30-29"><a href="#cb30-29" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb30-30"><a href="#cb30-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb30-31"><a href="#cb30-31" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Perform Chi-Squared Test</span></span>
<span id="cb30-32"><a href="#cb30-32" aria-hidden="true" tabindex="-1"></a>    test_result <span class="ot">&lt;-</span> <span class="fu">chisq.test</span>(contingency_table, <span class="at">correct =</span> <span class="cn">FALSE</span>)</span>
<span id="cb30-33"><a href="#cb30-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb30-34"><a href="#cb30-34" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Store results</span></span>
<span id="cb30-35"><a href="#cb30-35" aria-hidden="true" tabindex="-1"></a>    chi_squared_statistics[i] <span class="ot">&lt;-</span> test_result<span class="sc">$</span>statistic</span>
<span id="cb30-36"><a href="#cb30-36" aria-hidden="true" tabindex="-1"></a>    p_values[i] <span class="ot">&lt;-</span> test_result<span class="sc">$</span>p.value</span>
<span id="cb30-37"><a href="#cb30-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-38"><a href="#cb30-38" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Update counters</span></span>
<span id="cb30-39"><a href="#cb30-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (test_result<span class="sc">$</span>p.value <span class="sc">&lt;</span> alpha) {</span>
<span id="cb30-40"><a href="#cb30-40" aria-hidden="true" tabindex="-1"></a>      false_positives <span class="ot">&lt;-</span> false_positives <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb30-41"><a href="#cb30-41" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb30-42"><a href="#cb30-42" aria-hidden="true" tabindex="-1"></a>      true_negatives <span class="ot">&lt;-</span> true_negatives <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb30-43"><a href="#cb30-43" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb30-44"><a href="#cb30-44" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb30-45"><a href="#cb30-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-46"><a href="#cb30-46" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate summary statistics</span></span>
<span id="cb30-47"><a href="#cb30-47" aria-hidden="true" tabindex="-1"></a>  fp_percentage <span class="ot">&lt;-</span> (false_positives <span class="sc">/</span> num_simulations) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb30-48"><a href="#cb30-48" aria-hidden="true" tabindex="-1"></a>  tn_percentage <span class="ot">&lt;-</span> (true_negatives <span class="sc">/</span> num_simulations) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb30-49"><a href="#cb30-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-50"><a href="#cb30-50" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create summary table</span></span>
<span id="cb30-51"><a href="#cb30-51" aria-hidden="true" tabindex="-1"></a>  simulation_summary <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb30-52"><a href="#cb30-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">Metric =</span> <span class="fu">c</span>(</span>
<span id="cb30-53"><a href="#cb30-53" aria-hidden="true" tabindex="-1"></a>      <span class="st">"True Difference in Proportions"</span>,</span>
<span id="cb30-54"><a href="#cb30-54" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Mean Chi-Squared Statistic"</span>,</span>
<span id="cb30-55"><a href="#cb30-55" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Percentage of False Positives"</span>,</span>
<span id="cb30-56"><a href="#cb30-56" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Percentage of True Negatives"</span></span>
<span id="cb30-57"><a href="#cb30-57" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb30-58"><a href="#cb30-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">Value =</span> <span class="fu">c</span>(</span>
<span id="cb30-59"><a href="#cb30-59" aria-hidden="true" tabindex="-1"></a>      <span class="dv">0</span>,  <span class="co"># True difference (no effect)</span></span>
<span id="cb30-60"><a href="#cb30-60" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>(chi_squared_statistics),</span>
<span id="cb30-61"><a href="#cb30-61" aria-hidden="true" tabindex="-1"></a>      fp_percentage,</span>
<span id="cb30-62"><a href="#cb30-62" aria-hidden="true" tabindex="-1"></a>      tn_percentage</span>
<span id="cb30-63"><a href="#cb30-63" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb30-64"><a href="#cb30-64" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb30-65"><a href="#cb30-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-66"><a href="#cb30-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(<span class="at">summary =</span> simulation_summary, <span class="at">chi_squared_statistics =</span> chi_squared_statistics, <span class="at">p_values =</span> p_values))</span>
<span id="cb30-67"><a href="#cb30-67" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb30-68"><a href="#cb30-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-69"><a href="#cb30-69" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the simulation for "No Effect"</span></span>
<span id="cb30-70"><a href="#cb30-70" aria-hidden="true" tabindex="-1"></a>no_effect_results <span class="ot">&lt;-</span> <span class="fu">simulate_no_effect_chi_squared</span>(</span>
<span id="cb30-71"><a href="#cb30-71" aria-hidden="true" tabindex="-1"></a>  <span class="at">p_short_ad =</span> p_short_ad_no_effect,</span>
<span id="cb30-72"><a href="#cb30-72" aria-hidden="true" tabindex="-1"></a>  <span class="at">p_long_ad =</span> p_long_ad_no_effect,</span>
<span id="cb30-73"><a href="#cb30-73" aria-hidden="true" tabindex="-1"></a>  <span class="at">n =</span> n,</span>
<span id="cb30-74"><a href="#cb30-74" aria-hidden="true" tabindex="-1"></a>  <span class="at">num_simulations =</span> num_simulations,</span>
<span id="cb30-75"><a href="#cb30-75" aria-hidden="true" tabindex="-1"></a>  <span class="at">alpha =</span> alpha</span>
<span id="cb30-76"><a href="#cb30-76" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb30-77"><a href="#cb30-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-78"><a href="#cb30-78" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the summary and display it</span></span>
<span id="cb30-79"><a href="#cb30-79" aria-hidden="true" tabindex="-1"></a>no_effect_summary <span class="ot">&lt;-</span> no_effect_results<span class="sc">$</span>summary</span>
<span id="cb30-80"><a href="#cb30-80" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">--- Simulation Summary: No Effect ---</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
--- Simulation Summary: No Effect ---</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(no_effect_summary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                          Metric     Value
1 True Difference in Proportions  0.000000
2     Mean Chi-Squared Statistic  1.048083
3  Percentage of False Positives  5.700000
4   Percentage of True Negatives 94.300000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a data table for experiment-level results</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>experiment_results <span class="ot">&lt;-</span> <span class="fu">data.table</span>(</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Experiment_ID =</span> <span class="dv">1</span><span class="sc">:</span>num_simulations,</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Chi_Squared_Statistic =</span> no_effect_results<span class="sc">$</span>chi_squared_statistics,</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">P_value =</span> no_effect_results<span class="sc">$</span>p_values</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the distribution of p-values</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(experiment_results, <span class="fu">aes</span>(<span class="at">x =</span> P_value)) <span class="sc">+</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">30</span>, <span class="at">fill =</span> <span class="st">"blue"</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Distribution of P-Values from 1000 Experiments (No Effect)"</span>,</span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"P-Value"</span>,</span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Frequency"</span></span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="statistical_research_readme_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the distribution of Chi-Squared statistics</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(experiment_results, <span class="fu">aes</span>(<span class="at">x =</span> Chi_Squared_Statistic)) <span class="sc">+</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">30</span>, <span class="at">fill =</span> <span class="st">"red"</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Distribution of Chi-Squared Statistics (No Effect)"</span>,</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Chi-Squared Statistic"</span>,</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Frequency"</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="statistical_research_readme_files/figure-html/unnamed-chunk-8-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="result-reflection-4" class="level4">
<h4 class="anchored" data-anchor-id="result-reflection-4">Result Reflection</h4>
<p>The simulation and chi-squared test findings support the null hypothesis that there is no significant difference between the Control and Treatment groups in the no-effect scenario, where it is assumed that the treatment has no effect. The true effect was <code>0.0000</code>, indicating no difference. The mean estimated effect was <code>-0.0022</code>, which is a very small observed difference, likely due to random variation. The 95% confidence interval for the estimated effect ranged from <code>-0.0685</code> to <code>0.0643</code>, including zero, further supporting the conclusion that the observed difference could just be random fluctuation. With a false positive rate of <code>4.9%</code> and <code>95.1%</code> of tests correctly detecting no effect, the results suggest that the difference observed is not statistically significant, and the null hypothesis holds.</p>
</section>
</section>
<section id="q3-effect-chi-squared-test-of-independence" class="level2">
<h2 class="anchored" data-anchor-id="q3-effect-chi-squared-test-of-independence">Q3 Effect (Chi Squared Test of Independence)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set parameters</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">482</span>  <span class="co"># Sample size per group</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>p_short_ad_with_effect <span class="ot">&lt;-</span> <span class="fl">0.5</span>  <span class="co"># Weekly online purchase frequency for 10s ads</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>p_long_ad_with_effect <span class="ot">&lt;-</span> <span class="fl">0.6</span>  <span class="co"># Weekly online purchase frequency for 30s ads (higher, with effect)</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>num_simulations <span class="ot">&lt;-</span> <span class="dv">1000</span>  <span class="co"># Number of simulations</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>alpha <span class="ot">&lt;-</span> <span class="fl">0.05</span>  <span class="co"># Significance level</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Function for "With Effect" Chi-Squared Test</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>simulate_with_effect_chi_squared <span class="ot">&lt;-</span> <span class="cf">function</span>(p_short_ad, p_long_ad, n, num_simulations, alpha) {</span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Initialize variables</span></span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>  chi_squared_statistics <span class="ot">&lt;-</span> <span class="fu">numeric</span>(num_simulations)</span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>  p_values <span class="ot">&lt;-</span> <span class="fu">numeric</span>(num_simulations)</span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>  true_positives <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>  false_negatives <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Simulate multiple experiments</span></span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>num_simulations) {</span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Generate data for Short Ads and Long Ads groups</span></span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a>    short_ads <span class="ot">&lt;-</span> <span class="fu">rbinom</span>(n, <span class="at">size =</span> <span class="dv">1</span>, <span class="at">prob =</span> p_short_ad)</span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a>    long_ads <span class="ot">&lt;-</span> <span class="fu">rbinom</span>(n, <span class="at">size =</span> <span class="dv">1</span>, <span class="at">prob =</span> p_long_ad)</span>
<span id="cb36-22"><a href="#cb36-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb36-23"><a href="#cb36-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create a contingency table</span></span>
<span id="cb36-24"><a href="#cb36-24" aria-hidden="true" tabindex="-1"></a>    contingency_table <span class="ot">&lt;-</span> <span class="fu">matrix</span>(</span>
<span id="cb36-25"><a href="#cb36-25" aria-hidden="true" tabindex="-1"></a>      <span class="fu">c</span>(<span class="fu">sum</span>(short_ads), n <span class="sc">-</span> <span class="fu">sum</span>(short_ads),</span>
<span id="cb36-26"><a href="#cb36-26" aria-hidden="true" tabindex="-1"></a>        <span class="fu">sum</span>(long_ads), n <span class="sc">-</span> <span class="fu">sum</span>(long_ads)),</span>
<span id="cb36-27"><a href="#cb36-27" aria-hidden="true" tabindex="-1"></a>      <span class="at">nrow =</span> <span class="dv">2</span>,</span>
<span id="cb36-28"><a href="#cb36-28" aria-hidden="true" tabindex="-1"></a>      <span class="at">byrow =</span> <span class="cn">TRUE</span></span>
<span id="cb36-29"><a href="#cb36-29" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb36-30"><a href="#cb36-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb36-31"><a href="#cb36-31" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Perform Chi-Squared Test</span></span>
<span id="cb36-32"><a href="#cb36-32" aria-hidden="true" tabindex="-1"></a>    test_result <span class="ot">&lt;-</span> <span class="fu">chisq.test</span>(contingency_table, <span class="at">correct =</span> <span class="cn">FALSE</span>)</span>
<span id="cb36-33"><a href="#cb36-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb36-34"><a href="#cb36-34" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Store results</span></span>
<span id="cb36-35"><a href="#cb36-35" aria-hidden="true" tabindex="-1"></a>    chi_squared_statistics[i] <span class="ot">&lt;-</span> test_result<span class="sc">$</span>statistic</span>
<span id="cb36-36"><a href="#cb36-36" aria-hidden="true" tabindex="-1"></a>    p_values[i] <span class="ot">&lt;-</span> test_result<span class="sc">$</span>p.value</span>
<span id="cb36-37"><a href="#cb36-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-38"><a href="#cb36-38" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Update counters</span></span>
<span id="cb36-39"><a href="#cb36-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (test_result<span class="sc">$</span>p.value <span class="sc">&lt;</span> alpha) {</span>
<span id="cb36-40"><a href="#cb36-40" aria-hidden="true" tabindex="-1"></a>      true_positives <span class="ot">&lt;-</span> true_positives <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb36-41"><a href="#cb36-41" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb36-42"><a href="#cb36-42" aria-hidden="true" tabindex="-1"></a>      false_negatives <span class="ot">&lt;-</span> false_negatives <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb36-43"><a href="#cb36-43" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb36-44"><a href="#cb36-44" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb36-45"><a href="#cb36-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-46"><a href="#cb36-46" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate summary statistics</span></span>
<span id="cb36-47"><a href="#cb36-47" aria-hidden="true" tabindex="-1"></a>  tp_percentage <span class="ot">&lt;-</span> (true_positives <span class="sc">/</span> num_simulations) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb36-48"><a href="#cb36-48" aria-hidden="true" tabindex="-1"></a>  fn_percentage <span class="ot">&lt;-</span> (false_negatives <span class="sc">/</span> num_simulations) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb36-49"><a href="#cb36-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-50"><a href="#cb36-50" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create summary table</span></span>
<span id="cb36-51"><a href="#cb36-51" aria-hidden="true" tabindex="-1"></a>  simulation_summary <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb36-52"><a href="#cb36-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">Metric =</span> <span class="fu">c</span>(</span>
<span id="cb36-53"><a href="#cb36-53" aria-hidden="true" tabindex="-1"></a>      <span class="st">"True Difference in Proportions"</span>,</span>
<span id="cb36-54"><a href="#cb36-54" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Mean Chi-Squared Statistic"</span>,</span>
<span id="cb36-55"><a href="#cb36-55" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Percentage of True Positives"</span>,</span>
<span id="cb36-56"><a href="#cb36-56" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Percentage of False Negatives"</span></span>
<span id="cb36-57"><a href="#cb36-57" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb36-58"><a href="#cb36-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">Value =</span> <span class="fu">c</span>(</span>
<span id="cb36-59"><a href="#cb36-59" aria-hidden="true" tabindex="-1"></a>      p_long_ad <span class="sc">-</span> p_short_ad,  <span class="co"># True difference</span></span>
<span id="cb36-60"><a href="#cb36-60" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mean</span>(chi_squared_statistics),</span>
<span id="cb36-61"><a href="#cb36-61" aria-hidden="true" tabindex="-1"></a>      tp_percentage,</span>
<span id="cb36-62"><a href="#cb36-62" aria-hidden="true" tabindex="-1"></a>      fn_percentage</span>
<span id="cb36-63"><a href="#cb36-63" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb36-64"><a href="#cb36-64" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb36-65"><a href="#cb36-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-66"><a href="#cb36-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">list</span>(<span class="at">summary =</span> simulation_summary, <span class="at">chi_squared_statistics =</span> chi_squared_statistics, <span class="at">p_values =</span> p_values))</span>
<span id="cb36-67"><a href="#cb36-67" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb36-68"><a href="#cb36-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-69"><a href="#cb36-69" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the simulation for "With Effect"</span></span>
<span id="cb36-70"><a href="#cb36-70" aria-hidden="true" tabindex="-1"></a>with_effect_results <span class="ot">&lt;-</span> <span class="fu">simulate_with_effect_chi_squared</span>(</span>
<span id="cb36-71"><a href="#cb36-71" aria-hidden="true" tabindex="-1"></a>  <span class="at">p_short_ad =</span> p_short_ad_with_effect,</span>
<span id="cb36-72"><a href="#cb36-72" aria-hidden="true" tabindex="-1"></a>  <span class="at">p_long_ad =</span> p_long_ad_with_effect,</span>
<span id="cb36-73"><a href="#cb36-73" aria-hidden="true" tabindex="-1"></a>  <span class="at">n =</span> n,</span>
<span id="cb36-74"><a href="#cb36-74" aria-hidden="true" tabindex="-1"></a>  <span class="at">num_simulations =</span> num_simulations,</span>
<span id="cb36-75"><a href="#cb36-75" aria-hidden="true" tabindex="-1"></a>  <span class="at">alpha =</span> alpha</span>
<span id="cb36-76"><a href="#cb36-76" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb36-77"><a href="#cb36-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-78"><a href="#cb36-78" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the summary and display it</span></span>
<span id="cb36-79"><a href="#cb36-79" aria-hidden="true" tabindex="-1"></a>with_effect_summary <span class="ot">&lt;-</span> with_effect_results<span class="sc">$</span>summary</span>
<span id="cb36-80"><a href="#cb36-80" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">--- Simulation Summary: With Effect ---</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
--- Simulation Summary: With Effect ---</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(with_effect_summary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                          Metric    Value
1 True Difference in Proportions  0.10000
2     Mean Chi-Squared Statistic 11.04008
3   Percentage of True Positives 88.30000
4  Percentage of False Negatives 11.70000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a data table for experiment-level results</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>experiment_results <span class="ot">&lt;-</span> <span class="fu">data.table</span>(</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Experiment_ID =</span> <span class="dv">1</span><span class="sc">:</span>num_simulations,</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Chi_Squared_Statistic =</span> with_effect_results<span class="sc">$</span>chi_squared_statistics,</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">P_value =</span> with_effect_results<span class="sc">$</span>p_values</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the distribution of p-values</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(experiment_results, <span class="fu">aes</span>(<span class="at">x =</span> P_value)) <span class="sc">+</span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">30</span>, <span class="at">fill =</span> <span class="st">"blue"</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Distribution of P-Values from 1000 Experiments (With Effect)"</span>,</span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"P-Value"</span>,</span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Frequency"</span></span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="statistical_research_readme_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the distribution of Chi-Squared statistics</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(experiment_results, <span class="fu">aes</span>(<span class="at">x =</span> Chi_Squared_Statistic)) <span class="sc">+</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">30</span>, <span class="at">fill =</span> <span class="st">"red"</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Distribution of Chi-Squared Statistics (With Effect)"</span>,</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Chi-Squared Statistic"</span>,</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Frequency"</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="statistical_research_readme_files/figure-html/unnamed-chunk-9-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="result-reflection-5" class="level4">
<h4 class="anchored" data-anchor-id="result-reflection-5">Result Reflection</h4>
<p>The simulation and chi-squared test findings support the alternative hypothesis that there is a significant difference between the Control and Treatment groups in the with-effect scenario, where the true effect was <code>0.1000</code>. The mean estimated effect was <code>-0.1016</code>, suggesting a difference in the opposite direction of the true effect, likely due to random fluctuation or sampling error. The 95% confidence interval for the estimated effect ranged from <code>-0.1598</code> to <code>-0.0373</code>, indicating a significant effect that does not include zero. Despite the negative direction of the estimated effect, the <code>87%</code> true positive rate suggests that most tests correctly detected the effect, while <code>13%</code> of tests failed to do so. These results suggest that while the estimated effect is in the wrong direction, the treatment effect was likely detectable in many cases, but variability in the data led to some false negatives.</p>
</section>
</section>
<section id="table" class="level2">
<h2 class="anchored" data-anchor-id="table">Table</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Updated data frame with new values</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">Research_Question =</span> <span class="fu">c</span>(<span class="st">"Question 1"</span>, <span class="st">"Question 1"</span>, <span class="st">"Question 2"</span>, <span class="st">"Question 2"</span>, <span class="st">"Question 3"</span>, <span class="st">"Question 3"</span>),</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">Scenario =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">Effect =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Expected: 10%"</span>, <span class="st">"No"</span>, <span class="st">"Expected: 7%"</span>, <span class="st">"No"</span>, <span class="st">"Expected: 10%"</span>),</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">Percentage_of_False_Positives =</span> <span class="fu">c</span>(<span class="fl">5.6</span>, <span class="cn">NA</span>, <span class="fl">4.8</span>, <span class="cn">NA</span>, <span class="fl">5.7</span>, <span class="cn">NA</span>),</span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">Percentage_of_True_Negatives =</span> <span class="fu">c</span>(<span class="fl">94.4</span>, <span class="cn">NA</span>, <span class="fl">95.2</span>, <span class="cn">NA</span>, <span class="fl">94.3</span>, <span class="cn">NA</span>),</span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">Percentage_of_False_Negatives =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="fl">18.5</span>, <span class="cn">NA</span>, <span class="fl">18.6</span>, <span class="cn">NA</span>, <span class="fl">11.7</span>),</span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">Percentage_of_True_Positives =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="fl">81.5</span>, <span class="cn">NA</span>, <span class="fl">81.4</span>, <span class="cn">NA</span>, <span class="fl">88.3</span>)</span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Display updated table</span></span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(data, <span class="at">caption =</span> <span class="st">"Simulated Data Summary"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Simulated Data Summary</caption>
<colgroup>
<col style="width: 11%">
<col style="width: 5%">
<col style="width: 8%">
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 18%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Research_Question</th>
<th style="text-align: right;">Scenario</th>
<th style="text-align: left;">Effect</th>
<th style="text-align: right;">Percentage_of_False_Positives</th>
<th style="text-align: right;">Percentage_of_True_Negatives</th>
<th style="text-align: right;">Percentage_of_False_Negatives</th>
<th style="text-align: right;">Percentage_of_True_Positives</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Question 1</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">5.6</td>
<td style="text-align: right;">94.4</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">Question 1</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">Expected: 10%</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">18.5</td>
<td style="text-align: right;">81.5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Question 2</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">4.8</td>
<td style="text-align: right;">95.2</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">Question 2</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">Expected: 7%</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">18.6</td>
<td style="text-align: right;">81.4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Question 3</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">No</td>
<td style="text-align: right;">5.7</td>
<td style="text-align: right;">94.3</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">Question 3</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">Expected: 10%</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">11.7</td>
<td style="text-align: right;">88.3</td>
</tr>
</tbody>
</table>
</div>
</div>
<section id="conclusion" class="level4">
<h4 class="anchored" data-anchor-id="conclusion">Conclusion</h4>
<p>With an emphasis on attracting customers and boosting sales, subscriptions, and frequency of purchases, this simulation study assesses how well YouTube ad techniques work to promote Coca-Cola’s new product. The simulations tested the effects of ad length, kind, and frequency on consumer behavior by simulating real-world situations. In line with Coca-Cola’s objective to increase product awareness and income, Research Question 1 showed a statistically significant <code>2%</code> increase in sales under the impact scenario when ad frequency was increased from one to three advertisements per week. In response to Research Question 2, it was discovered that non-skippable advertisements generated a <code>15%</code> greater subscription rate than skippable ones, demonstrating their capacity to draw in repeat business and foster loyalty. According to Research Question 3, 30-second advertisements resulted in a <code>20%</code> increase in weekly purchase frequency, demonstrating the importance of longer advertisements in promoting more communication. The impact scenarios provided Coca-Cola with useful information to properly customize their advertising efforts, while the no-effect scenarios confirmed the statistical methodologies’ reliability across all questions. These results highlight how crucial strategic ad design is to reaching Coca-Cola’s marketing objectives for their new product.</p>
</section>
</section>
</section>
<section id="references" class="level1">
<h1><strong>References</strong></h1>
<p>BrandVM. (n.d.). Coca-Cola marketing strategy. Retrieved December 1, 2024, from https://www.brandvm.com/post/coca-cola-marketing-strategy</p>
<p>DemandSage. (2024, November 14). How many people use YouTube 2024 (active users stats). Retrieved December 1, 2024, from https://www.demandsage.com/youtube-stats/</p>
<p>Macrotrends. (n.d.). Coca-Cola revenue 2010-2024. Retrieved December 1, 2024, from https://www.macrotrends.net/stocks/charts/KO/cocacola/revenue</p>
<p>CNN Business. (2024, September 24). Coca-Cola is pulling its newest ‘permanent’ flavor from store shelves, from https://www.cnn.com/2024/09/24/food/coca-cola-spiced-discontinued/index.html</p>
<p>Pikas, B., &amp; Sorrentino, G. (2014). The effectiveness of online advertising: Consumers perceptions of ads on facebook, twitter and YouTube. The Journal of Applied Business and Economics, 16(4), 70-81.</p>
<p>Soukup, Paul A. (2014). Looking at, through, and with YouTube. Communication Research Trends, 33(3), 3-34.</p>
<p>Chadha, R. (2018). Marketers think YouTube, Facebook are most effective video ad platforms (Surprise!). E- Marketer, from https://www.emarketer.com/content/marketers-think-youtube-facebook-the-most-effective-video-ad-platforms-surprise</p>
<p>Jarboe, G. (2009). YouTube and video marketing: An hour a day. Indianapolis, IN: Wiley Publishing Inc.</p>
<p>Miles, J. (2013). YouTube marketing power: How to use video to find more prospects, launch your products, and reach a massive audience. McGraw-Hill.</p>
<p>Moon, Jang Ho. “The Impact of Video Quality and Image Size on the Effectiveness of Online Video Advertising on YouTube.” Informs Journal on Computing 10 (2014): 23-29.</p>
<p>Pashkevich, M., Dorai-Raj, S., Kellar, M., &amp; Zigmond, D. (2012). Empowering online advertisements by empowering viewers with the right to choose: the relative effectiveness of skippable video advertisements on YouTube. Journal of advertising research, 52(4), 451-457.</p>
<p>Li, H., &amp; Lo, H. Y. (2014). Do You Recognize Its Brand? The Effectiveness of Online In-Stream Video Advertisements. Journal of Advertising, 44(3), 208–218. https://doi.org/10.1080/00913367.2014.956376</p>
<p>Firat, Duygu. “YouTube advertising value and its effects on purchase intention.” Journal of Global Business Insights (2019): n.&nbsp;Pag.</p>
<p>Google Ads Help. About video ad formats, from https://support.google.com/google-ads/answer/2375464#bumper-ads</p>
<p>Chen, T., Fenyo, K., Yang, S., and Zhang, J. (2018). Thinking inside the subscription box: New research on e-commerce consumers. McKinsey &amp; Co, from https://www.mckinsey.com/industries/technology-media-and-telecommunications/ourinsights/thinking-inside-the-subscription-box-new-research-on-ecommerce-consumers.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>